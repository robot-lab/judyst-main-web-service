(function(t){function e(e){for(var r,i,o=e[0],c=e[1],u=e[2],f=0,p=[];f<o.length;f++)i=o[f],s[i]&&p.push(s[i][0]),s[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(p.length)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(r=!1)}r&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},s={app:0},a=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/static/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("c21b"),s=n.n(r);s.a},"0da0":function(t,e,n){"use strict";var r=n("8eca"),s=n.n(r);s.a},"0eae":function(t,e,n){"use strict";var r=n("89ac"),s=n.n(r);s.a},"10eb":function(t,e,n){"use strict";var r=n("5234"),s=n.n(r);s.a},2447:function(t,e,n){"use strict";var r=n("59fb"),s=n.n(r);s.a},3069:function(t,e,n){},"46d8":function(t,e,n){},5234:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Navbar"),n("Workspace"),n("Footer")],1)},a=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"link-search-main container"},[n("SearchBlock",{staticClass:"search-block",on:{SearchResultsReceived:function(e){t.SearchResult=e}}}),null!=t.SearchResult?n("SearchResultsBlock",{attrs:{SearchResults:t.SearchResult}}):t._e()],1)},o=[],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{attrs:{id:"custom-search-input"}},[n("div",{staticClass:"input-group"},[n("input",{staticClass:"search-query form-control",attrs:{type:"text",id:"input-search",placeholder:"Поиск"}}),n("span",{staticClass:"input-group-btn"},[n("button",{attrs:{type:"button"}},[n("span",{staticClass:"fa fa-search",on:{click:function(e){t.SearchButtonClick()}}})])])])])])])])},u=[];n("ac6a"),n("28a5");function l(t){return t.map(function(t){return t.trim()}).filter(function(t){if(""!==t)return t})}function f(t){return t.filter(function(t,e,n){return n.indexOf(t)===e})}var p={trimFromSpaces:l,distinctArr:f},h={ElemsDelimiter:",",CitationPartsDelimiter:"->"},d={any_front:"*",any_back:-1};function _(t){var e=t.split(h.CitationPartsDelimiter);if(e=p.trimFromSpaces(e),e.length<2)return null;var n=e[0].split(h.ElemsDelimiter);n=p.trimFromSpaces(n),n=p.distinctArr(n);var r=e[1].split(h.ElemsDelimiter),s=[];if(r=p.trimFromSpaces(r),r=p.distinctArr(r),-1!==n.indexOf(d.any_front)){if(-1!==r.indexOf(d.any_front))return null;for(var a=0;a<r.length;a++)s.push({doc_id_from:d.any_back,doc_id_to:r[a]})}else if(-1!==r.indexOf(d.any_front))for(a=0;a<n.length;a++)s.push({doc_id_from:n[a],doc_id_to:d.any_back});else for(a=0;a<n.length;a++)for(var i=0;i<r.length;i++)s.push({doc_id_from:n[a],doc_id_to:r[i]});return s}var v={CitationFastSearch:_},m={sampleKeyword:"sampleKeyword"};function b(){throw"Not implemented!"}function C(t){var e=m.values;for(var n in e)if(-1!==t.indexOf(n))return b(t);if(t.indexOf(h.CitationPartsDelimiter))return v.CitationFastSearch(t);throw"Not implemented!"}var g=C,S={name:"SearchBlock",data:function(){return{url:"api/search/number_of_links",searchResultsRaw:'[            {"doc_id_from": "КСРФ/34-П/2018","doc_id_to": "КСРФ/5-П/2007","to_doc_title": "титл","citations_number": 1,"contexts_list": ["Контектс"],"positions_list": [9113]},            {"doc_id_from": "КСРФ/34-П/2018","doc_id_to": "КСРФ/5-П/2007","to_doc_title": "титл","citations_number": 1,"contexts_list": ["Контектс"],"positions_list": [9113]}        ]',tmp:"none"}},methods:{SearchButtonClick:function(){var t=document.getElementById("input-search").value,e=g(t);if(null!=e){for(var n=[],r=0,s=this,a=0;a<e.length;a++){var i=e[a],o=JSON.stringify(i),c=new XMLHttpRequest;c.open("POST",this.url,!0),c.setRequestHeader("content-type","application/json"),c.send(o),s.tmp=[],c.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var t=this.responseText+"";s.tmp.push(i);var e=JSON.parse(t);n.push({Size:e.size,doc_id_from:i.doc_id_from,doc_id_to:i.doc_id_to}),r+=1}else r+=1}}var u=function t(){r===e.length?s.$emit("SearchResultsReceived",n):setTimeout(t,500)};setTimeout(u,500)}else this.$emit("SearchResultsReceived",null)}}},k=S,y=(n("e059"),n("2877")),R=Object(y["a"])(k,c,u,!1,null,"20d66ba7",null);R.options.__file="SearchBlock.vue";var x=R.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t.LinksCount>0?n("div",{staticClass:"search-result-block"},[n("span",{staticClass:"page-list"},[n("PageList",{attrs:{Count:t.LinksCount,Step:t.Step,Current:t.CurrentRange},on:{PageChanged:function(e){t.getLinks(e)}}})],1),t.isLoaded?n("div",{staticClass:"links-block"},[t._l(t.Links,function(t){return n("div",{key:t.id},[n("SearchResult",{attrs:{CleanLink:t.Link}})],1)}),n("span",{staticClass:"page-list"},[n("PageList",{attrs:{Count:t.LinksCount,Step:t.Step,Current:t.CurrentRange},on:{PageChanged:function(e){t.getLinks(e)}}})],1),n("FooterController"),t._v(">\n        ")],2):n("p",[t._v("Загружается...")])]):n("div",{staticClass:"container"},[t._v("\n            Поиск не дал результатов. \n    ")])])},P=[],O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container link-container card card-body"},[n("span",[n("p",[t._v("Цитирующий документ: "+t._s(t.CleanLink.doc_id_from)+" ")])]),n("span",[n("p",[t._v("Цитируемый документ: "+t._s(t.CleanLink.doc_id_to)+" ")])]),n("span",[n("p",[t._v("Заголовок цитируемого документа: "+t._s(t.CleanLink.to_doc_title)+" ")])]),n("span",[n("p",[t._v("Количество упоминаний: "+t._s(t.CleanLink.citations_number)+" ")])]),t._l(t.CitationsRange,function(e){return n("div",{key:e},[n("span",[n("p",[t._v("Контекст цитаты: "+t._s(t.CleanLink.contexts[e].before)+" "),n("b",[t._v(t._s(t.CleanLink.contexts[e].citation))]),t._v(" "+t._s(t.CleanLink.contexts[e].after)+" ")])]),n("a",{attrs:{href:"#"}},[t._v("Перейти к цитате в тексте")])])})],2)},w=[],j={name:"SearchResult",props:{CleanLink:Object},computed:{CitationsRange:function(){for(var t=[],e=0;e<this.CleanLink.citations_number;e++)t.push(e);return t}},methods:{GetPositionLink:function(t,e){return"#"+t+"__"+e}}},$=j,E=(n("5973"),Object(y["a"])($,O,w,!1,null,"4ec9bfe9",null));E.options.__file="SearchResult.vue";var N=E.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-list"},[n("span",[n("a",{staticClass:"page-link",on:{click:function(e){t.$emit("PageChanged",t.FirstPages)}}},[t._v("\n         <<<\n    ")]),t._l(t.PrevioslyPages,function(e){return n("a",{key:e[0],staticClass:"page-link",on:{click:function(n){t.$emit("PageChanged",e)}}},[t._v("\n        "+t._s(e[0])+" - "+t._s(e[1])+"\n    ")])}),n("p",{staticClass:"page-link current-link"},[t._v("\n        |"+t._s(t.Current[0])+" - "+t._s(t.Current[1])+"|\n    ")]),t._l(t.NextPages,function(e){return n("a",{key:e[0],staticClass:"page-link",on:{click:function(n){t.$emit("PageChanged",e)}}},[t._v("\n        "+t._s(e[0])+" - "+t._s(e[1])+"\n    ")])}),n("a",{staticClass:"page-link",on:{click:function(e){t.$emit("PageChanged",t.LastPages)}}},[t._v("\n        >>>\n    ")])],2)])},T=[],B=(n("c5f6"),{name:"PageList",data:function(){return{tmp:"none"}},props:{Count:Number,Step:Number,Current:Array},computed:{PrevioslyPages:function(){var t=[],e=this.Current;if(e[0]>2){var n=e[0]-this.Step-1;n<1&&(n=1),t.push([n,e[0]-1])}return t},NextPages:function(){for(var t=[],e=this.Current,n=0;n<2;n++){var r=e;if(e=[r[1]+1,r[1]+this.Step],e[0]>this.Count)break;e[1]>this.Count&&(e[1],this.Count),t.push(e)}return t},FirstPages:function(){var t=[1,this.Step];return t[1]>this.Count&&(t[1]=this.Count),t},LastPages:function(){var t=[this.Count-this.Step+1,this.Count];return t[0]<1&&(t[0]=1),t}}}),z=B,J=(n("59be"),Object(y["a"])(z,F,T,!1,null,"cd6f3780",null));J.options.__file="PageList.vue";var A=J.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p")},H=[],M={name:"FooterController",created:function(){document.getElementsByClassName("footer").style.position="relative"},destroyed:function(){document.getElementsByClassName("footer").style.position="absolute"}},q=M,W=Object(y["a"])(q,D,H,!1,null,null,null);W.options.__file="FooterController.vue";var K=W.exports,X={name:"SearchResultBlock",props:{SearchResults:Array},data:function(){return{Step:10,CurrentRange:[1,20],url:"api/search/get",tmp:null,Links:[],isLoaded:!1}},computed:{LinksCount:function(){for(var t=0,e=0;e<this.SearchResults.length;e++)t+=this.SearchResults[e].Size;return t}},components:{SearchResult:N,PageList:A,FooterController:K},methods:{fillContexts:function(t){for(var e=0;e<t.length;e++){var n=t[e];n.contexts=[];for(var r=0;r<n.positions_list.length;r++){var s=n.positions_list[r],a=n.text.substr(s.context_start,s.link_start-s.context_start),i=n.text.substr(s.link_start,s.link_end-s.link_start),o=n.text.substr(s.link_end,s.context_end-s.link_end),c={before:a,citation:i,after:o};n.contexts.push(c)}t[e]=n}return t},getLinks:function(t){this.CurrentRange=t,this.isLoaded=!1;var e=0,n=0,r=0,s=0,a=this,i=this.url,o=[],c=function(t,e){var n={doc_id_from:e.doc_id_from,doc_id_to:e.doc_id_to,range:t},r=JSON.stringify(n),c=new XMLHttpRequest;c.open("POST",i,!0),c.setRequestHeader("content-type","application/json"),c.send(r),c.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var t=c.responseText,e=JSON.parse(t),n=[];e=a.fillContexts(e);for(var r=0;r<e.length;r++)n.push({id:r,Link:e[r]});o=o.concat(n),s++}else alert("ошибка: "+(this.status?this.statusText:"запрос не удался"))}};while(n<this.SearchResults.length&&e<t[0]){if(!(e+this.SearchResults[n].Size<=t[0])){var u=t[0]-e;if(e+this.SearchResults[n].Size<=t[1]){var l=[u,this.SearchResults[n].Size];e+=this.SearchResults[n].Size}else{var f=t[1]-e;l=[u,f],e+=t[1]-t[0]}r++;var p=n;setTimeout(function(){c(l,a.SearchResults[p])},0),n++;break}e+=this.SearchResults[n].Size,n++}while(n<this.SearchResults.length&&e<t[1])e+this.SearchResults[n].Size<=t[1]?(l=[0,this.SearchResults[n].Size],e+=this.SearchResults[n].Size):(l=[0,t[1]-e],e=t[1]),p=n,setTimeout(function(){c(l,a.SearchResults[p])},0),r++,n++;var h=function t(){r<=s?(a.Links=o,a.isLoaded=!0):setTimeout(t,500)};setTimeout(h,0)}},created:function(){this.CurrentRange=[1,this.Step],this.LinksCount<this.Step&&(this.CurrentRange[1]=this.LinksCount),this.getLinks(this.CurrentRange)}},G=X,I=(n("0eae"),Object(y["a"])(G,L,P,!1,null,"1bcecfa2",null));I.options.__file="SearchResultsBlock.vue";var Q=I.exports,U={name:"Search",data:function(){return{SearchResult:null}},components:{SearchBlock:x,SearchResultsBlock:Q},methods:{}},V=U,Y=(n("10eb"),Object(y["a"])(V,i,o,!1,null,"304c7938",null));Y.options.__file="Search.vue";var Z=Y.exports,tt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},et=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"page-footer font-small white"},[n("div",{staticClass:"footer-copyright text-center py-3"},[t._v("© 2018 Copyright:\n        "),n("a",{attrs:{href:"https://github.com/orgs/robot-lab/teams/team-judicial-analysis/members"}},[t._v(" Judist team")])])])}],nt={name:"Navbar"},rt=nt,st=(n("0da0"),Object(y["a"])(rt,tt,et,!1,null,"fbbd49de",null));st.options.__file="Footer.vue";var at=st.exports,it=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ot=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"navbar fixed-top navbar-dark bg-dark  navbar-main"},[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"navbar-header"},[n("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v("Judist")])])])])}],ct={name:"Navbar"},ut=ct,lt=(n("7b0a"),Object(y["a"])(ut,it,ot,!1,null,"08e5b9bf",null));lt.options.__file="Navbar.vue";var ft=lt.exports,pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"workspace container "},[n("router-view")],1)},ht=[],dt={name:"Workspace",components:{}},_t=dt,vt=(n("2447"),Object(y["a"])(_t,pt,ht,!1,null,null,null));vt.options.__file="Workspace.vue";var mt=vt.exports,bt=n("8c4f"),Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container "},[n("Search")],1)},gt=[],St={name:"HomePage",components:{Search:Z}},kt=St,yt=(n("a3bb"),Object(y["a"])(kt,Ct,gt,!1,null,null,null));yt.options.__file="HomePage.vue";var Rt=yt.exports,xt=[{path:"/",component:Rt}],Lt=new bt["a"]({routes:xt}),Pt={Router:Lt},Ot={name:"app",router:Pt.Router,components:{Footer:at,Navbar:ft,Search:Z,Workspace:mt}},wt=Ot,jt=(n("034f"),Object(y["a"])(wt,s,a,!1,null,null,null));jt.options.__file="App.vue";var $t=jt.exports;r["a"].config.productionTip=!1,r["a"].use(bt["a"]),new r["a"]({render:function(t){return t($t)}}).$mount("#app")},5973:function(t,e,n){"use strict";var r=n("3069"),s=n.n(r);s.a},"59be":function(t,e,n){"use strict";var r=n("b65b"),s=n.n(r);s.a},"59fb":function(t,e,n){},"7b0a":function(t,e,n){"use strict";var r=n("46d8"),s=n.n(r);s.a},"89ac":function(t,e,n){},"8eca":function(t,e,n){},a3bb:function(t,e,n){"use strict";var r=n("bfc3"),s=n.n(r);s.a},b65b:function(t,e,n){},bfc3:function(t,e,n){},c21b:function(t,e,n){},e059:function(t,e,n){"use strict";var r=n("fecf"),s=n.n(r);s.a},fecf:function(t,e,n){}});
//# sourceMappingURL=app.5f6738a9.js.map