(function(t){function e(e){for(var i,r,o=e[0],c=e[1],u=e[2],d=0,f=[];d<o.length;d++)r=o[d],a[r]&&f.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(f.length)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(i=!1)}i&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var i={},a={app:0},s=[];function r(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/static/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"02fb":function(t,e,n){"use strict";var i=n("543b"),a=n.n(i);a.a},"034f":function(t,e,n){"use strict";var i=n("c21b"),a=n.n(i);a.a},"0c78":function(t,e,n){"use strict";var i=n("8bc4"),a=n.n(i);a.a},"0e25":function(t,e,n){"use strict";var i=n("f49e"),a=n.n(i);a.a},"124a":function(t,e,n){"use strict";var i=n("4746"),a=n.n(i);a.a},"1b06":function(t,e,n){},2447:function(t,e,n){"use strict";var i=n("59fb"),a=n.n(i);a.a},"2eaf":function(t,e,n){"use strict";var i=n("1b06"),a=n.n(i);a.a},3382:function(t,e,n){"use strict";var i=n("67f6"),a=n.n(i);a.a},4746:function(t,e,n){},"543b":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var i=n("5ee5"),a=n.n(i),s=n("8c4f"),r=n("9f7b"),o=(n("f9e3"),n("2dd8"),n("bc3a")),c=n.n(o),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Navbar"),n("Workspace"),n("Footer")],1)},l=[],d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container "},[n("b-container",[n("p",[t._v(t._s(t.description))]),n("p",[t._v(t._s(t.token))])])],1)},f=[],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"link-search-main"},[n("SearchBlock",{staticClass:"search-block",attrs:{Request:t.SearchRequest},on:{SearchResultsReceived:function(e){t.SearchResult=e}}}),null!=t.SearchResult?n("SearchResultsBlock",{attrs:{SearchResults:t.SearchResult}}):t._e()],1)},m=[],h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",[n("b-row",[n("div",{staticClass:"col-12"},[n("div",{attrs:{id:"custom-search-input"}},[t.isLoading?n("p",[t._v(" Ведется поиск...")]):t._e(),n("div",{staticClass:"input-group"},[n("input",{staticClass:"search-query form-control",attrs:{type:"text",id:"input-search",placeholder:"Поиск"},domProps:{value:t.SearchRequest},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.SearchButtonClick()}}}),n("span",{staticClass:"input-group-btn"},[n("button",{attrs:{type:"button"}},[n("span",{staticClass:"fa fa-search",on:{click:function(e){t.SearchButtonClick()}}})])])])])])])],1)},v=[];n("ac6a"),n("28a5");function _(t){return t.map(function(t){return t.trim()}).filter(function(t){if(""!==t)return t})}function g(t){return t.filter(function(t,e,n){return n.indexOf(t)===e})}var b={trimFromSpaces:_,distinctArr:g},k={ElemsDelimiter:",",CitationPartsDelimiter:"->"},C={any_front:"*",any_back:-1};function S(t){var e=t.split(k.CitationPartsDelimiter);if(e=b.trimFromSpaces(e),e.length<2)return null;var n=e[0].split(k.ElemsDelimiter);n=b.trimFromSpaces(n),n=b.distinctArr(n);var i=e[1].split(k.ElemsDelimiter),a=[];if(i=b.trimFromSpaces(i),i=b.distinctArr(i),-1!==n.indexOf(C.any_front))if(-1!==i.indexOf(C.any_front))a.push({doc_id_from:C.any_back,doc_id_to:C.any_back});else for(var s=0;s<i.length;s++)a.push({doc_id_from:C.any_back,doc_id_to:i[s]});else if(-1!==i.indexOf(C.any_front))for(s=0;s<n.length;s++)a.push({doc_id_from:n[s],doc_id_to:C.any_back});else for(s=0;s<n.length;s++)for(var r=0;r<i.length;r++)a.push({doc_id_from:n[s],doc_id_to:i[r]});return a}var L={CitationFastSearch:S},R={sampleKeyword:"sampleKeyword"};function w(){throw"Not implemented!"}function x(t){var e=R.values;for(var n in e)if(-1!==t.indexOf(n))return w(t);if(t.indexOf(k.CitationPartsDelimiter))return L.CitationFastSearch(t);throw"Not implemented!"}var y=x;function P(t,e,n,i){var a=0,s=0,r=0,o=0,c=[],u=function(t,n){var i={doc_id_from:n.doc_id_from,doc_id_to:n.doc_id_to,range:t},a=JSON.stringify(i),s=new XMLHttpRequest;s.open("POST",e,!0),s.setRequestHeader("content-type","application/json"),s.send(a),s.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){for(var t=s.responseText,e=JSON.parse(t),n=[],i=0;i<e.length;i++)n.push(e[i]);c=c.concat(n),o++}else alert("ошибка: "+(this.status?this.statusText:"запрос не удался"))}};while(s<n.length&&a<t[0]){if(!(a+n[s].Size<=t[0])){var l=t[0]-a;if(a+n[s].Size<=t[1]){var d=[l,n[s].Size];a+=n[s].Size}else{var f=t[1]-a;d=[l,f],a+=t[1]-t[0]}r++;var p=s;setTimeout(function(){u(d,n[p])},0),s++;break}a+=n[s].Size,s++}while(s<n.length&&a<t[1])a+n[s].Size<=t[1]?(d=[0,n[s].Size],a+=n[s].Size):(d=[0,t[1]-a],a=t[1]),p=s,setTimeout(function(){u(d,n[p])},0),r++,s++;var m=function t(){r<=o?i(c):setTimeout(t,500)};setTimeout(m,0)}function O(t,e,n){var i=y(t);if(null!=i){for(var a=[],s=0,r=0;r<i.length;r++){var o=i[r],c=JSON.stringify(o),u=new XMLHttpRequest;u.open("POST",e,!0),u.setRequestHeader("content-type","application/json"),u.send(c),u.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var t=this.responseText+"",e=JSON.parse(t);a.push({Size:e.size,doc_id_from:o.doc_id_from,doc_id_to:o.doc_id_to}),s+=1}else s+=1}}var l=function t(){s===i.length?n(a):setTimeout(t,500)};setTimeout(l,500)}else n(null)}function q(t,e,n){var i=new XMLHttpRequest;i.open("POST",e,!0),i.setRequestHeader("content-type","application/json");var a=JSON.stringify({doc_id:t});i.send(a),i.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var t=this.responseText+"",e=JSON.parse(t);n(e)}else n(null,this.status)}}var E={RequestLinks:P,RequestSearch:O,RequestDocument:q},N="/api",T={Search:"".concat(N,"/search/number_of_links"),Document:"".concat(N,"/search/document"),Links:"".concat(N,"/search/get"),Auth_signin:"".concat(N,"/login"),Auth_signup:"".concat(N,"/register"),Auth_signout:"".concat(N,"/logout")},j="user",D={Search:"/search",SignUp:"/".concat(j,"/signup")},I={doc_id_delimiter:["/","-_-"]};function $(t){var e,n,i=0;if(0===t.length)return i;for(e=0;e<t.length;e++)n=t.charCodeAt(e),i=(i<<5)-i+n,i|=0;return i}function A(t){return $("".concat(t.doc_id_from).concat(t.doc_id_to))}function z(t){return t.split(I.doc_id_delimiter[0]).join(I.doc_id_delimiter[1])}function U(t){return t.split(I.doc_id_delimiter[1]).join(I.doc_id_delimiter[0])}function B(t){return t=t.split(I.doc_id_delimiter[0]).join(I.doc_id_delimiter[1]),t}function F(t){return t=t.split(I.doc_id_delimiter[1]).join(I.doc_id_delimiter[0]),t}var M={Hash:$,StashDocId:z,DeStashDocId:U,HashLink:A,StashRequest:B,DeStashRequest:F},V={name:"SearchBlock",props:{Request:String},data:function(){return{url:T.Search,SearchRequest:"",isLoading:!1,tmp:"none"}},methods:{SearchButtonClick:function(){var t=document.getElementById("input-search").value;t=M.StashRequest(t),this.$router.push("".concat(D.Search,"/").concat(t))},Update:function(){if(null!=this.Request){this.SearchRequest=M.DeStashRequest(this.Request);var t=this;this.isLoading=!0,E.RequestSearch(this.SearchRequest,this.url,function(e){t.$emit("SearchResultsReceived",e),t.isLoading=!1})}}},watch:{Request:function(){this.Update()}},created:function(){this.Update()}},H=V,J=(n("5ff8"),n("2877")),G=Object(J["a"])(H,h,v,!1,null,"58f8333b",null);G.options.__file="SearchBlock.vue";var W=G.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",[t.LinksCount>0?n("div",{staticClass:"search-result-block"},[n("span",{staticClass:"page-list"},[n("PageList",{attrs:{Count:t.LinksCount,Step:t.Step,Current:t.CurrentRange},on:{PageChanged:function(e){t.getLinks(e)}}})],1),n("SearchStatistics",{attrs:{SearchResults:t.SearchResults,Count:t.LinksCount}}),t.isLoaded?n("div",{staticClass:"links-block"},[n("LinkBoxView",{attrs:{Links:t.Links,DefaultCollapse:!1}}),n("span",{staticClass:"page-list"},[n("PageList",{attrs:{Count:t.LinksCount,Step:t.Step,Current:t.CurrentRange},on:{PageChanged:function(e){t.getLinks(e)}}})],1)],1):n("p",[t._v("Загружается...")])],1):n("div",{staticClass:"container"},[t._v("\n            Поиск не дал результатов. \n    ")])])},Q=[],X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("LinkView",{attrs:{CleanLink:t.CleanLink}})},Y=[],Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"link-container container card"},[n("b-card-header",{staticClass:"link-header"},[n("span",[n("p",[t._v("Цитирующий документ: "),n("router-link",{staticClass:"link",attrs:{to:"/document/"+t.utils.StashDocId(t.CleanLink.doc_id_from)+"/0"}},[t._v(t._s(t.CleanLink.doc_id_from))])],1)]),n("span",[n("p",[t._v("Цитируемый документ: "),n("router-link",{staticClass:"link",attrs:{to:"/document/"+t.utils.StashDocId(t.CleanLink.doc_id_to)+"/0"}},[t._v(t._s(t.CleanLink.doc_id_to))])],1)])]),n("b-card-body",[n("p",[n("b",[t._v("Заголовок цитируемого документа:")]),t._v(" "+t._s(t.CleanLink.to_doc_title)+"\n                ")]),n("span",[n("p",[t._v("Количество упоминаний: "+t._s(t.CleanLink.citations_number)+" ")])]),n("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.TitleId,expression:"TitleId"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"context-toggler",attrs:{title:"Нажмите, чтобы просмотреть контекст цитаты"}},[t._v("\n                    Контекст цитирования\n                ")]),n("b-collapse",{attrs:{id:t.TitleId}},t._l(t.CitationsRange,function(e){return n("b-card-group",{key:e},[n("b-card",[n("b-card-header"),n("b-card-body",[n("p",[t._v(t._s(t.CleanLink.contexts[e].before)+" "),n("b",[t._v(t._s(t.CleanLink.contexts[e].citation))]),t._v(" "+t._s(t.CleanLink.contexts[e].after)+" ")])]),n("b-card-footer",[n("router-link",{attrs:{to:"/document/"+t.utils.StashDocId(t.CleanLink.doc_id_from)+"/"+t.utils.HashLink(t.CleanLink)}},[t._v("\n                            Перейти к цитате в тексте\n                        ")])],1)],1)],1)}))],1)],1)},tt=[],et={name:"LinkView",props:{CleanLink:Object,DefaultCollapse:Boolean},data:function(){return{utils:M}},computed:{CitationsRange:function(){for(var t=[],e=0;e<this.CleanLink.citations_number;e++)t.push(e);return t},TitleId:function(){return"#collapse_"+this.CleanLink.doc_id_from+"-"+this.CleanLink.doc_id_to}},methods:{GetPositionLink:function(t,e){return"#"+t+"__"+e}}},nt=et,it=(n("0c78"),Object(J["a"])(nt,Z,tt,!1,null,null,null));it.options.__file="LinkView.vue";var at=it.exports,st={name:"SearchResult",components:{LinkView:at},props:{CleanLink:Object},computed:{},methods:{}},rt=st,ot=(n("7c23"),Object(J["a"])(rt,X,Y,!1,null,"d66bb60e",null));ot.options.__file="SearchResult.vue";var ct=ot.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",[n("b-card-header",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"search-request-statistics",expression:"'search-request-statistics'"}],staticClass:"bg-info text-white"},[t._v("\n            Статистический анализ запроса\n        ")]),n("b-collapse",{attrs:{id:"search-request-statistics"}},[n("b-card-body",[n("p",[t._v("Найдено: "+t._s(t.LinksCount))])])],1)],1)},lt=[],dt=(n("c5f6"),{name:"SearchStatistics",data:function(){return{tmp:"none"}},props:{SearchResults:Array,Count:Number},computed:{LinksCount:function(){return void 0==this.Count&&this.ComputeCount(),this.Count}},methods:{ComputeCount:function(){for(var t=0,e=0;e<this.SearchResults.length;e++)t+=this.SearchResults[e].Size;this.Count=t}}}),ft=dt,pt=(n("b0be"),Object(J["a"])(ft,ut,lt,!1,null,"40ec3108",null));pt.options.__file="SearchStatistics.vue";var mt=pt.exports,ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-list"},[n("span",[n("a",{staticClass:"page-link",on:{click:function(e){t.$emit("PageChanged",t.FirstPages)}}},[t._v("\n         <<<\n    ")]),t._l(t.PrevioslyPages,function(e){return n("a",{key:e[0],staticClass:"page-link",on:{click:function(n){t.$emit("PageChanged",e)}}},[t._v("\n        "+t._s(e[0])+" - "+t._s(e[1])+"\n    ")])}),n("p",{staticClass:"page-link current-link"},[t._v("\n        |"+t._s(t.Current[0])+" - "+t._s(t.Current[1])+"|\n    ")]),t._l(t.NextPages,function(e){return n("a",{key:e[0],staticClass:"page-link",on:{click:function(n){t.$emit("PageChanged",e)}}},[t._v("\n        "+t._s(e[0])+" - "+t._s(e[1])+"\n    ")])}),n("a",{staticClass:"page-link",on:{click:function(e){t.$emit("PageChanged",t.LastPages)}}},[t._v("\n        >>>\n    ")])],2)])},vt=[],_t={name:"PageList",data:function(){return{tmp:"none"}},props:{Count:Number,Step:Number,Current:Array},computed:{PrevioslyPages:function(){var t=[],e=this.Current;if(e[0]>2){var n=e[0]-this.Step-1;n<1&&(n=1),t.push([n,e[0]-1])}return t},NextPages:function(){for(var t=[],e=this.Current,n=0;n<2;n++){var i=e;if(e=[i[1]+1,i[1]+this.Step],e[0]>this.Count)break;e[1]>this.Count&&(e[1],this.Count),t.push(e)}return t},FirstPages:function(){var t=[1,this.Step];return t[1]>this.Count&&(t[1]=this.Count),t},LastPages:function(){var t=[this.Count-this.Step+1,this.Count];return t[0]<1&&(t[0]=1),t}}},gt=_t,bt=(n("59be"),Object(J["a"])(gt,ht,vt,!1,null,"cd6f3780",null));bt.options.__file="PageList.vue";var kt=bt.exports,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"links-block"},t._l(t.Links,function(e){return n("div",{key:e.doc_id_from+e.doc_id_to},[n("LinkView",{attrs:{CleanLink:e,CollapseDefault:t.CollapseDefault}})],1)}))},St=[],Lt={name:"LinksBoxView",components:{LinkView:at},props:{Links:Array,CollapseDefault:Boolean}},Rt=Lt,wt=(n("0e25"),Object(J["a"])(Rt,Ct,St,!1,null,"569d50b9",null));wt.options.__file="LinksBoxView.vue";var xt=wt.exports,yt={name:"SearchResultBlock",props:{SearchResults:Array},data:function(){return{Step:10,CurrentRange:[1,20],url:T.Links,tmp:null,Links:[],isLoaded:!1}},computed:{LinksCount:function(){for(var t=0,e=0;e<this.SearchResults.length;e++)t+=this.SearchResults[e].Size;return t}},components:{SearchResult:ct,PageList:kt,LinkBoxView:xt,SearchStatistics:mt},methods:{getLinks:function(t){this.CurrentRange=t,this.isLoaded=!1;var e=this;E.RequestLinks(t,this.url,this.SearchResults,function(t){e.isLoaded=!0,e.Links=t})},Initialize:function(){this.CurrentRange=[1,this.Step],this.LinksCount<this.Step&&(this.CurrentRange[1]=this.LinksCount),this.getLinks(this.CurrentRange)}},watch:{SearchResults:function(){this.Initialize()}},created:function(){this.Initialize()}},Pt=yt,Ot=(n("02fb"),Object(J["a"])(Pt,K,Q,!1,null,"f5080ad4",null));Ot.options.__file="SearchResultsBlock.vue";var qt=Ot.exports,Et={name:"Search",data:function(){return{SearchResult:null,tmp:"none",SearchRequest:null}},methods:{SetSearchRequest:function(t){this.SearchRequest=void 0!=t||null!=t?t.trim():""}},created:function(){this.tmp="1",this.SetSearchRequest(this.$route.params.request)},beforeRouteUpdate:function(t,e,n){this.tmp="2",this.SetSearchRequest(t.params.request),n()},components:{SearchBlock:W,SearchResultsBlock:qt}},Nt=Et,Tt=(n("fe21"),Object(J["a"])(Nt,p,m,!1,null,"4f299b83",null));Tt.options.__file="Search.vue";var jt=Tt.exports,Dt="Tempor ut laborum ex excepteur laborum duis. Incididunt et nisi aliquip deserunt ea Lorem sit officia et consequat dolor ad adipisicing. Sint elit dolore esse consectetur dolore ut ullamco deserunt eiusmod sint. Non ut amet nisi non proident ex consequat commodo irure tempor in sit. Nostrud consectetur do labore eu amet exercitation velit aliqua nulla anim ipsum excepteur. Lorem amet magna adipisicing fugiat quis anim sit ipsum voluptate qui veniam velit in ex. Laboris pariatur commodo eiusmod velit cillum sint veniam amet.",It={name:"HomePage",data:function(){return{description:Dt}},components:{Search:jt},computed:{token:function(){return this.$store.token}}},$t=It,At=(n("a3bb"),Object(J["a"])($t,d,f,!1,null,null,null));At.options.__file="HomePage.vue";var zt=At.exports,Ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"wrap",attrs:{fluid:""}},[null!=t.CurrentDocument?n("div",[n("h5",{staticClass:"title-block"},[n("b",[t._v("Заголовок документа:")]),n("p",[t._v(t._s(t.CurrentDocument.title))])]),n("h4",{staticClass:"id-block"},[n("p",[n("b",[t._v("Номер документа:")]),t._v(" "+t._s(t.CurrentDocument.doc_id))])]),n("h4",{staticClass:"date-block"},[n("p",[n("b",[t._v("Дата публикации:")]),t._v(" "+t._s(t.CurrentDocument.release_date)+" ")])]),n("b-card",[null!=t.LinksTo?n("b-container",[n("b-card-header",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"link_to_block",expression:"'link_to_block'"}]},[t._v("Цитирование этого документа")]),n("b-collapse",{attrs:{id:"link_to_block"}},[n("b-card-body",[n("multipage-links-view",{attrs:{SearchResults:t.LinksTo,Step:5,DefaultCollapse:!0}})],1)],1)],1):n("p",[t._v(" Выполняется предобработка...")])],1),n("div",{staticClass:"text-block"},[null!==t.ProcessedText?n("div",[n("v-runtime-template",{attrs:{template:t.ProcessedText}})],1):n("p",[t._v("\n                Выполняется предобработка...\n            ")])])],1):n("div",[n("p",[t._v("Документ загружается...")])])])},Bt=[],Ft=(n("55dd"),n("dd1e")),Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",[t.LinksCount>0?n("div",{staticClass:"search-result-block"},[n("span",{staticClass:"page-list"},[n("PageList",{attrs:{Count:t.LinksCount,Step:t.Step,Current:t.CurrentRange},on:{PageChanged:function(e){t.getLinks(e)}}})],1),t.isLoaded?n("div",{staticClass:"links-block"},[n("b-card-group",[n("LinkBoxView",{attrs:{Links:t.Links,CollapseDefault:t.CollapseDefault}})],1),n("span",{staticClass:"page-list"},[n("PageList",{attrs:{Count:t.LinksCount,Step:t.Step,Current:t.CurrentRange},on:{PageChanged:function(e){t.getLinks(e)}}})],1)],1):n("p",[t._v("Загружается...")])]):n("b-container",[t._v("\n            Не обнаружено.\n    ")])],1)},Vt=[],Ht={name:"MultipageLinksView",props:{SearchResults:Array,Step:Number,CollapseDefault:Boolean},data:function(){return{CurrentRange:[1,this.Step],tmp:null,Links:[],isLoaded:!1}},computed:{LinksCount:function(){for(var t=0,e=0;e<this.SearchResults.length;e++)t+=this.SearchResults[e].Size;return t}},components:{PageList:kt,LinkBoxView:xt},methods:{getLinks:function(t){this.CurrentRange=t,this.isLoaded=!1;var e=this;E.RequestLinks(t,T.Links,this.SearchResults,function(t){e.isLoaded=!0,e.Links=t})},Initialize:function(){this.CurrentRange=[1,this.Step],this.LinksCount<this.Step&&(this.CurrentRange[1]=this.LinksCount),this.getLinks(this.CurrentRange)}},watch:{SearchResults:function(){this.Initialize()}},created:function(){this.Initialize()}},Jt=Ht,Gt=(n("124a"),Object(J["a"])(Jt,Mt,Vt,!1,null,"1e7d3a26",null));Gt.options.__file="MultipageLinksView.vue";var Wt=Gt.exports,Kt={name:"DocumentView",components:{multipageLinksView:Wt,VRuntimeTemplate:Ft["a"]},data:function(){return{Step:5,LinksTo:null,LinksPackFrom:null,CurrentDocument:null,tmp:"none"}},computed:{SortedAloneLinks:function(){if(null===this.LinksPackFrom||null===this.LinksTo)return null;for(var t=[],e=0;e<this.LinksPackFrom.length;e++){for(var n=this.LinksPackFrom[e],i=0;i<n.positions_list.length;i++)var a={doc_id_from:n.doc_id_from,doc_id_to:n.doc_id_to,to_doc_title:n.to_doc_title,position:n.positions_list[i]};t.push(a)}return t.sort(function(t,e){return t.position.link_start-e.position.link_end}),t},ProcessedText:function(){if(null===this.CurrentDocument||null===this.SortedAloneLinks)return null;for(var t=this.CurrentDocument.text,e="<div><template>",n=0,i=0;i<this.SortedAloneLinks.length;i++){var a=this.SortedAloneLinks[i];e+=t.slice(n,a.position.link_start);var s=t.slice(a.position.link_start,a.position.link_end+1);e+='<b-btn size="sm" variant="link"  @click="OpenLink(\'/document/'.concat(M.StashDocId(a.doc_id_to),"/0')\">").concat(s,"</b-btn>"),n=a.position.link_end}return e+=t.slice(n,t.length),e+="</template></div>",e}},methods:{OpenLink:function(t){this.$router.push(t),this.tmp=t},Init:function(t){this.LinksTo=null,this.LinksPackFrom=null,this.CurrentDocument=null;var e=M.DeStashDocId(t.params.doc_id),n=this;E.RequestDocument(e,T.Document,function(t,e){null===t&&alert("Error while getting document. Error code: "+e),n.CurrentDocument=t}),E.RequestSearch("*->".concat(e),T.Search,function(t){n.LinksTo=t}),E.RequestSearch("".concat(e,"->*"),T.Search,function(t){E.RequestLinks([1,t.Size],T.Links,t,function(t){n.LinksPackFrom=t})})}},created:function(){this.Init(this.$route)},beforeRouteUpdate:function(t,e,n){this.Init(t),n()}},Qt=Kt,Xt=(n("65ca"),Object(J["a"])(Qt,Ut,Bt,!1,null,"4540e000",null));Xt.options.__file="DocumentView.vue";var Yt=Xt.exports,Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center",staticStyle:{padding:"50px 0"}},[n("div",{staticClass:"logo"},[t._v("Sign Up")]),n("div",{staticClass:"login-form-1"},[n("form",{staticClass:"text-left",on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[n("div",{staticClass:"login-form-main-message"}),n("div",{staticClass:"main-login-form"},[""!=t.errMessage?n("div",[n("p",{staticClass:"danger"},[t._v(t._s(t.errMessage))])]):t._e(),n("div",{staticClass:"login-group"},[n("div",{staticClass:"form-group"},[n("label",{staticClass:"sr-only",attrs:{for:"lg_email"}},[t._v("email")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text",placeholder:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"sr-only",attrs:{for:"lg_password"}},[t._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"sr-only",attrs:{for:"lg_email"}},[t._v("first name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"first name",required:""},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"sr-only",attrs:{for:"lg_email"}},[t._v("last name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"last name",required:""},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value)}}})]),t._m(0)])])])])])},te=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"login-button",attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-chevron-ri ght"})])}],ee="AUTH_REQUEST",ne="AUTH_SUCCESS",ie="AUTH_ERROR",ae="AUTH_LOGOUT",se="USER_REQUEST",re="REGISTER_REQUEST",oe="REGISTER_SUCCESS",ce="REGISTER_ERROR";function ue(t){return""!=t.password&&t.email.indexOf("@")>-1&&""!=t.firstName&&""!=t.LastName}function le(t){return 400==t.code&&"user already exist"==t.message}var de={CheckRegModel:ue,isUserExistError:le},fe={name:"SignInForm",data:function(){return{email:"Rexarrior@yandex.ru",password:"sTame_342",firstName:"Ksandr",lastName:"renderon",organization:"none",errMessage:""}},methods:{register:function(){var t=this,e={email:this.email,password:this.password,firstName:this.firstName,lastName:this.lastName,organization:this.organization};de.CheckRegModel(e)&&this.$store.dispatch(re,e).then(function(){t.$router.push("/")},function(e){de.isUserExistError(e)&&(t.errMessage=e)})}}},pe=fe,me=Object(J["a"])(pe,Zt,te,!1,null,null,null);me.options.__file="SignUpForm.vue";var he=me.exports,ve=[{path:"/",component:zt},{name:"document",path:"/document/:doc_id/:hash",component:Yt},{path:"/search/:request",component:jt},{path:"/search/",redirect:"/search/ "},{path:D.SignUp,component:he}],_e=new s["a"]({routes:ve}),ge={Router:_e},be=n("2f62"),ke=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Ce=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"page-footer font-small white"},[n("div",{staticClass:"footer-copyright text-center py-3"},[t._v("© 2018 Copyright:\n        "),n("a",{attrs:{href:"https://github.com/orgs/robot-lab/teams/team-judicial-analysis/members"}},[t._v(" Judyst team")])])])}],Se={name:"Navbar"},Le=Se,Re=(n("3382"),Object(J["a"])(Le,ke,Ce,!1,null,"401daa4c",null));Re.options.__file="Footer.vue";var we=Re.exports,xe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"navbar fixed-top navbar-dark bg-dark  navbar-main"},[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"navbar-header"},[n("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v("Judyst")])],1),n("b-navbar-nav",{attrs:{left:""}},[n("b-nav-item",{attrs:{to:"/search/"}},[t._v("Search")])],1),n("b-navbar-nav",[n("auth-bar")],1)],1)])},ye=[],Pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",[t.isAuthenticated?n("div",[n("b-btn",{attrs:{size:"sm",variant:"outline-success"}},[t._v("\n        Logout\n    ")])],1):n("div",[n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.signInModal",modifiers:{signInModal:!0}}],attrs:{size:"sm",variant:"outline-success"}},[t._v("\n            Sign in\n        ")]),n("b-btn",{attrs:{size:"sm",variant:"outline-success"}},[t._v("\n            Sign out\n        ")])],1),n("b-modal",{attrs:{id:"signInModal","hide-footer":"","hide-title":""}},[n("SignInForm")],1)],1)},Oe=[],qe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center",staticStyle:{padding:"50px 0"}},[n("div",{staticClass:"logo"},[t._v("Sign in")]),n("div",{staticClass:"login-form-1"},[n("form",{staticClass:"text-left",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[n("div",{staticClass:"login-form-main-message"}),n("div",{staticClass:"main-login-form"},[n("div",{staticClass:"login-group"},[n("div",{staticClass:"form-group"},[n("label",{staticClass:"sr-only",attrs:{for:"lg_email"}},[t._v("email")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text",placeholder:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"sr-only",attrs:{for:"lg_password"}},[t._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._m(0)]),n("div",{staticClass:"etc-login-form"},[n("p",[t._v("new user? "),n("router-link",{attrs:{to:t.signUpUrl}},[t._v("create new account")])],1)])])])])},Ee=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"login-button",attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-chevron-right"})])}],Ne={name:"SignInForm",data:function(){return{email:"",password:"",signUpUrl:D.SignUp}},methods:{login:function(){var t=this,e=this.email,n=this.password;this.$store.dispatch(ee,{email:e,password:n}).then(function(){t.$router.push("/")})}}},Te=Ne,je=(n("fc6b"),Object(J["a"])(Te,qe,Ee,!1,null,null,null));je.options.__file="SignInForm.vue";var De=je.exports,Ie={name:"AuthBar",computed:{isAuthenticated:function(){return this.$store.isAuthenticated}},methods:{logout:function(){var t=this;this.$store.dispatch(ae).then(function(){t.$router.push("/login")})}},components:{SignInForm:De}},$e=Ie,Ae=Object(J["a"])($e,Pe,Oe,!1,null,null,null);Ae.options.__file="AuthBar.vue";var ze=Ae.exports,Ue={name:"Navbar",components:{AuthBar:ze}},Be=Ue,Fe=(n("2eaf"),Object(J["a"])(Be,xe,ye,!1,null,"5d456a1f",null));Fe.options.__file="Navbar.vue";var Me=Fe.exports,Ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"workspace"},[n("router-view")],1)},He=[],Je={name:"Workspace",components:{}},Ge=Je,We=(n("2447"),Object(J["a"])(Ge,Ve,He,!1,null,null,null));We.options.__file="Workspace.vue";var Ke,Qe,Xe=We.exports,Ye=n("a322"),Ze={token:localStorage.getItem("user-token")||"",status:""},tn={isAuthenticated:function(t){return!!t.token},authStatus:function(t){return t.status}},en=(Ke={},Object(Ye["a"])(Ke,ee,function(t,e){var n=t.commit,i=t.dispatch;return new Promise(function(t,a){n(ee),c()({url:T.Auth_signin,data:e,method:"POST"}).then(function(e){var a=e.data.token;localStorage.setItem("user-token",a),c.a.defaults.headers.common["Authorization"]=a,n(ne,a),i(se),t(e)}).catch(function(t){n(ie,t),localStorage.removeItem("user-token"),a(t)})})}),Object(Ye["a"])(Ke,ae,function(t){var e=t.commit;t.dispatch;return new Promise(function(t,n){e(ae),c()({url:T.Auth_signout,method:"GET"}),localStorage.removeItem("user-token"),delete c.a.defaults.headers.common["Authorization"],t()})}),Object(Ye["a"])(Ke,re,function(t,e){var n=t.commit,i=t.dispatch;return new Promise(function(t,a){n(re),c()({url:T.Auth_signup,data:e,method:"POST"}).then(function(e){var a=e.data.token;localStorage.setItem("user-token",a),c.a.defaults.headers.common["Authorization"]=a,n(oe,a),i(se),t(e)}).catch(function(t){n(ce,t),localStorage.removeItem("user-token"),a(t)})})}),Ke),nn=(Qe={},Object(Ye["a"])(Qe,ee,function(t){t.status="loading"}),Object(Ye["a"])(Qe,ne,function(t,e){t.status="success",t.token=e}),Object(Ye["a"])(Qe,ie,function(t){t.status="error"}),Object(Ye["a"])(Qe,re,function(t){t.status="loading"}),Object(Ye["a"])(Qe,oe,function(t,e){t.status="success",t.token=e}),Object(Ye["a"])(Qe,ce,function(t){t.status="error"}),Qe),an={state:Ze,getters:tn,mutations:nn,actions:en};a.a.use(be["a"]);var sn={name:"app",router:ge.Router,store:new be["a"].Store({modules:{auth_store:an}}),components:{Footer:we,Navbar:Me,Search:jt,Workspace:Xe}},rn=sn,on=(n("034f"),Object(J["a"])(rn,u,l,!1,null,null,null));on.options.__file="App.vue";var cn=on.exports;a.a.config.productionTip=!1,a.a.use(s["a"]),a.a.use(r["a"]),new a.a({render:function(t){return t(cn)}}).$mount("#app");var un=localStorage.getItem("user-token");un&&(c.a.defaults.headers.common["Authorization"]=un)},"59be":function(t,e,n){"use strict";var i=n("b65b"),a=n.n(i);a.a},"59fb":function(t,e,n){},"5ff8":function(t,e,n){"use strict";var i=n("aea6"),a=n.n(i);a.a},"62f3":function(t,e,n){},"65ca":function(t,e,n){"use strict";var i=n("edfc"),a=n.n(i);a.a},"67f6":function(t,e,n){},"6f3c":function(t,e,n){},"7c23":function(t,e,n){"use strict";var i=n("6f3c"),a=n.n(i);a.a},"8a68":function(t,e,n){},"8bc4":function(t,e,n){},a3bb:function(t,e,n){"use strict";var i=n("bfc3"),a=n.n(i);a.a},aea6:function(t,e,n){},b0be:function(t,e,n){"use strict";var i=n("62f3"),a=n.n(i);a.a},b65b:function(t,e,n){},bfc3:function(t,e,n){},c21b:function(t,e,n){},ca47:function(t,e,n){},edfc:function(t,e,n){},f49e:function(t,e,n){},fc6b:function(t,e,n){"use strict";var i=n("8a68"),a=n.n(i);a.a},fe21:function(t,e,n){"use strict";var i=n("ca47"),a=n.n(i);a.a}});
//# sourceMappingURL=app.1ab47a48.js.map