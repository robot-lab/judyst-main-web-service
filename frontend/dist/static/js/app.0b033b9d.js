(function(t){function e(e){for(var i,s,o=e[0],c=e[1],u=e[2],f=0,d=[];f<o.length;f++)s=o[f],r[s]&&d.push(r[s][0]),r[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(e);while(d.length)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(i=!1)}i&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},r={app:0},a=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/static/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("c21b"),r=n.n(i);r.a},"0596":function(t,e,n){"use strict";var i=n("68b7"),r=n.n(i);r.a},"0c78":function(t,e,n){"use strict";var i=n("8bc4"),r=n.n(i);r.a},"107f":function(t,e,n){"use strict";var i=n("62e5"),r=n.n(i);r.a},1255:function(t,e,n){},2447:function(t,e,n){"use strict";var i=n("59fb"),r=n.n(i);r.a},"46d8":function(t,e,n){},"49a3":function(t,e,n){"use strict";var i=n("1255"),r=n.n(i);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var i=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Navbar"),n("Workspace"),n("Footer")],1)},a=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"link-search-main container"},[n("SearchBlock",{staticClass:"search-block",on:{SearchResultsReceived:function(e){t.SearchResult=e}}}),null!=t.SearchResult?n("SearchResultsBlock",{attrs:{SearchResults:t.SearchResult}}):t._e()],1)},o=[],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[n("div",{attrs:{id:"custom-search-input"}},[n("div",{staticClass:"input-group"},[n("input",{staticClass:"search-query form-control",attrs:{type:"text",id:"input-search",placeholder:"Поиск"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.SearchButtonClick()}}}),n("span",{staticClass:"input-group-btn"},[n("button",{attrs:{type:"button"}},[n("span",{staticClass:"fa fa-search",on:{click:function(e){t.SearchButtonClick()}}})])])])])])])])},u=[];n("ac6a"),n("28a5");function l(t){return t.map(function(t){return t.trim()}).filter(function(t){if(""!==t)return t})}function f(t){return t.filter(function(t,e,n){return n.indexOf(t)===e})}var d={trimFromSpaces:l,distinctArr:f},p={ElemsDelimiter:",",CitationPartsDelimiter:"->"},_={any_front:"*",any_back:-1};function h(t){var e=t.split(p.CitationPartsDelimiter);if(e=d.trimFromSpaces(e),e.length<2)return null;var n=e[0].split(p.ElemsDelimiter);n=d.trimFromSpaces(n),n=d.distinctArr(n);var i=e[1].split(p.ElemsDelimiter),r=[];if(i=d.trimFromSpaces(i),i=d.distinctArr(i),-1!==n.indexOf(_.any_front))if(-1!==i.indexOf(_.any_front))r.push({doc_id_from:_.any_back,doc_id_to:_.any_back});else for(var a=0;a<i.length;a++)r.push({doc_id_from:_.any_back,doc_id_to:i[a]});else if(-1!==i.indexOf(_.any_front))for(a=0;a<n.length;a++)r.push({doc_id_from:n[a],doc_id_to:_.any_back});else for(a=0;a<n.length;a++)for(var s=0;s<i.length;s++)r.push({doc_id_from:n[a],doc_id_to:i[s]});return r}var v={CitationFastSearch:h},m={sampleKeyword:"sampleKeyword"};function k(){throw"Not implemented!"}function b(t){var e=m.values;for(var n in e)if(-1!==t.indexOf(n))return k(t);if(t.indexOf(p.CitationPartsDelimiter))return v.CitationFastSearch(t);throw"Not implemented!"}var C=b;function g(t,e,n,i){var r=0,a=0,s=0,o=0,c=[],u=function(t,n){var i={doc_id_from:n.doc_id_from,doc_id_to:n.doc_id_to,range:t},r=JSON.stringify(i),a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("content-type","application/json"),a.send(r),a.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){for(var t=a.responseText,e=JSON.parse(t),n=[],i=0;i<e.length;i++)n.push({id:i,Link:e[i]});c=c.concat(n),o++}else alert("ошибка: "+(this.status?this.statusText:"запрос не удался"))}};while(a<n.length&&r<t[0]){if(!(r+n[a].Size<=t[0])){var l=t[0]-r;if(r+n[a].Size<=t[1]){var f=[l,n[a].Size];r+=n[a].Size}else{var d=t[1]-r;f=[l,d],r+=t[1]-t[0]}s++;var p=a;setTimeout(function(){u(f,n[p])},0),a++;break}r+=n[a].Size,a++}while(a<n.length&&r<t[1])r+n[a].Size<=t[1]?(f=[0,n[a].Size],r+=n[a].Size):(f=[0,t[1]-r],r=t[1]),p=a,setTimeout(function(){u(f,n[p])},0),s++,a++;var _=function t(){s<=o?i(c):setTimeout(t,500)};setTimeout(_,0)}function S(t,e,n){var i=C(t);if(null!=i){for(var r=[],a=0,s=0;s<i.length;s++){var o=i[s],c=JSON.stringify(o),u=new XMLHttpRequest;u.open("POST",e,!0),u.setRequestHeader("content-type","application/json"),u.send(c),u.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var t=this.responseText+"",e=JSON.parse(t);r.push({Size:e.size,doc_id_from:o.doc_id_from,doc_id_to:o.doc_id_to}),a+=1}else a+=1}}var l=function t(){a===i.length?n(r):setTimeout(t,500)};setTimeout(l,500)}else n(null)}function L(t,e,n){var i=new XMLHttpRequest;i.open("POST",e,!0),i.setRequestHeader("content-type","application/json");var r=JSON.stringify({doc_id:t});i.send(r),i.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var t=this.responseText+"",e=JSON.parse(t);n(e)}else n(null)}}var y={RequestLinks:g,RequestSearch:S,RequestDocument:L},x={Search:"api/search/number_of_links",Document:"api/search/document",Links:"api/search/get"},R={name:"SearchBlock",data:function(){return{url:x.Search,searchResultsRaw:'[            {"doc_id_from": "КСРФ/34-П/2018","doc_id_to": "КСРФ/5-П/2007","to_doc_title": "титл","citations_number": 1,"contexts_list": ["Контектс"],"positions_list": [9113]},            {"doc_id_from": "КСРФ/34-П/2018","doc_id_to": "КСРФ/5-П/2007","to_doc_title": "титл","citations_number": 1,"contexts_list": ["Контектс"],"positions_list": [9113]}        ]',tmp:"none"}},methods:{SearchButtonClick:function(){var t=document.getElementById("input-search").value,e=this;y.RequestSearch(t,this.url,function(t){e.$emit("SearchResultsReceived",t)})}}},w=R,P=(n("0596"),n("2877")),O=Object(P["a"])(w,c,u,!1,null,"5eeb355c",null);O.options.__file="SearchBlock.vue";var j=O.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t.LinksCount>0?n("div",{staticClass:"search-result-block"},[n("p",[t._v("Найдено: "+t._s(t.LinksCount))]),n("span",{staticClass:"page-list"},[n("PageList",{attrs:{Count:t.LinksCount,Step:t.Step,Current:t.CurrentRange},on:{PageChanged:function(e){t.getLinks(e)}}})],1),t.isLoaded?n("div",{staticClass:"links-block"},[n("LinkBoxView",{attrs:{Links:t.Links}}),n("span",{staticClass:"page-list"},[n("PageList",{attrs:{Count:t.LinksCount,Step:t.Step,Current:t.CurrentRange},on:{PageChanged:function(e){t.getLinks(e)}}})],1)],1):n("p",[t._v("Загружается...")])]):n("div",{staticClass:"container"},[t._v("\n            Поиск не дал результатов. \n    ")])])},$=[],E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("LinkView",{attrs:{CleanLink:t.CleanLink}})},T=[],B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container link-container card card-body"},[n("span",[n("p",[t._v("Цитирующий документ: "),n("router-link",{attrs:{to:"/document/"+t.utils.StashDocId(t.CleanLink.doc_id_from)+"/0"}},[t._v(t._s(t.CleanLink.doc_id_from))])],1)]),n("span",[n("p",[t._v("Цитируемый документ: "),n("router-link",{attrs:{to:"/document/"+t.utils.StashDocId(t.CleanLink.doc_id_to)+"/0"}},[t._v(t._s(t.CleanLink.doc_id_to))])],1)]),n("span",[n("p",[t._v("Заголовок цитируемого документа: "+t._s(t.CleanLink.to_doc_title)+" ")])]),n("span",[n("p",[t._v("Количество упоминаний: "+t._s(t.CleanLink.citations_number)+" ")])]),t._l(t.CitationsRange,function(e){return n("div",{key:e},[n("span",[n("p",[t._v("Контекст цитаты: "+t._s(t.CleanLink.contexts[e].before)+" "),n("b",[t._v(t._s(t.CleanLink.contexts[e].citation))]),t._v(" "+t._s(t.CleanLink.contexts[e].after)+" ")])]),n("router-link",{attrs:{to:"/document/"+t.utils.StashDocId(t.CleanLink.doc_id_from)+"/"+t.utils.HashLink(t.CleanLink)}},[t._v("\n            Перейти к цитате в тексте\n        ")])],1)})],2)},N=[];function z(t){var e,n,i=0;if(0===t.length)return i;for(e=0;e<t.length;e++)n=t.charCodeAt(e),i=(i<<5)-i+n,i|=0;return i}function q(t){return z("".concat(t.doc_id_from).concat(t.doc_id_to))}function V(t){return t.split("/").join("_")}function F(t){return t.split("_").join("/")}var H={Hash:z,StashDocId:V,DeStashDocId:F,HashLink:q},I={name:"LinkView",props:{CleanLink:Object},data:function(){return{utils:H}},computed:{CitationsRange:function(){for(var t=[],e=0;e<this.CleanLink.citations_number;e++)t.push(e);return t}},methods:{GetPositionLink:function(t,e){return"#"+t+"__"+e}}},J=I,A=(n("0c78"),Object(P["a"])(J,B,N,!1,null,null,null));A.options.__file="LinkView.vue";var M=A.exports,W={name:"SearchResult",components:{LinkView:M},props:{CleanLink:Object},computed:{},methods:{}},X=W,K=(n("7c23"),Object(P["a"])(X,E,T,!1,null,"d66bb60e",null));K.options.__file="SearchResult.vue";var G=K.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-list"},[n("span",[n("a",{staticClass:"page-link",on:{click:function(e){t.$emit("PageChanged",t.FirstPages)}}},[t._v("\n         <<<\n    ")]),t._l(t.PrevioslyPages,function(e){return n("a",{key:e[0],staticClass:"page-link",on:{click:function(n){t.$emit("PageChanged",e)}}},[t._v("\n        "+t._s(e[0])+" - "+t._s(e[1])+"\n    ")])}),n("p",{staticClass:"page-link current-link"},[t._v("\n        |"+t._s(t.Current[0])+" - "+t._s(t.Current[1])+"|\n    ")]),t._l(t.NextPages,function(e){return n("a",{key:e[0],staticClass:"page-link",on:{click:function(n){t.$emit("PageChanged",e)}}},[t._v("\n        "+t._s(e[0])+" - "+t._s(e[1])+"\n    ")])}),n("a",{staticClass:"page-link",on:{click:function(e){t.$emit("PageChanged",t.LastPages)}}},[t._v("\n        >>>\n    ")])],2)])},U=[],Y=(n("c5f6"),{name:"PageList",data:function(){return{tmp:"none"}},props:{Count:Number,Step:Number,Current:Array},computed:{PrevioslyPages:function(){var t=[],e=this.Current;if(e[0]>2){var n=e[0]-this.Step-1;n<1&&(n=1),t.push([n,e[0]-1])}return t},NextPages:function(){for(var t=[],e=this.Current,n=0;n<2;n++){var i=e;if(e=[i[1]+1,i[1]+this.Step],e[0]>this.Count)break;e[1]>this.Count&&(e[1],this.Count),t.push(e)}return t},FirstPages:function(){var t=[1,this.Step];return t[1]>this.Count&&(t[1]=this.Count),t},LastPages:function(){var t=[this.Count-this.Step+1,this.Count];return t[0]<1&&(t[0]=1),t}}}),Z=Y,tt=(n("59be"),Object(P["a"])(Z,Q,U,!1,null,"cd6f3780",null));tt.options.__file="PageList.vue";var et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"links-block"},t._l(t.Links,function(t){return n("div",{key:t.id},[n("LinkView",{attrs:{CleanLink:t.Link}})],1)}))},it=[],rt={name:"LinksBoxView",components:{LinkView:M},props:{Links:Array}},at=rt,st=(n("49a3"),Object(P["a"])(at,nt,it,!1,null,"dc4e113e",null));st.options.__file="LinksBoxView.vue";var ot=st.exports,ct={name:"SearchResultBlock",props:{SearchResults:Array},data:function(){return{Step:10,CurrentRange:[1,20],url:x.Links,tmp:null,Links:[],isLoaded:!1}},computed:{LinksCount:function(){for(var t=0,e=0;e<this.SearchResults.length;e++)t+=this.SearchResults[e].Size;return t}},components:{SearchResult:G,PageList:et,LinkBoxView:ot},methods:{getLinks:function(t){this.CurrentRange=t,this.isLoaded=!1;var e=this;y.RequestLinks(t,this.url,this.SearchResults,function(t){e.isLoaded=!0,e.Links=t})},Initialize:function(){this.CurrentRange=[1,this.Step],this.LinksCount<this.Step&&(this.CurrentRange[1]=this.LinksCount),this.getLinks(this.CurrentRange)}},watch:{SearchResults:function(){this.Initialize()}},created:function(){this.Initialize()}},ut=ct,lt=(n("71a1"),Object(P["a"])(ut,D,$,!1,null,"c0640f66",null));lt.options.__file="SearchResultsBlock.vue";var ft=lt.exports,dt={name:"Search",data:function(){return{SearchResult:null}},components:{SearchBlock:j,SearchResultsBlock:ft},methods:{}},pt=dt,_t=(n("f4ce"),Object(P["a"])(pt,s,o,!1,null,"5dd6b0dc",null));_t.options.__file="Search.vue";var ht=_t.exports,vt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},mt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"page-footer font-small white"},[n("div",{staticClass:"footer-copyright text-center py-3"},[t._v("© 2018 Copyright:\n        "),n("a",{attrs:{href:"https://github.com/orgs/robot-lab/teams/team-judicial-analysis/members"}},[t._v(" Judist team")])])])}],kt={name:"Navbar"},bt=kt,Ct=(n("b485"),Object(P["a"])(bt,vt,mt,!1,null,"49877f48",null));Ct.options.__file="Footer.vue";var gt=Ct.exports,St=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Lt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"navbar fixed-top navbar-dark bg-dark  navbar-main"},[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"navbar-header"},[n("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v("Judist")])])])])}],yt={name:"Navbar"},xt=yt,Rt=(n("7b0a"),Object(P["a"])(xt,St,Lt,!1,null,"08e5b9bf",null));Rt.options.__file="Navbar.vue";var wt=Rt.exports,Pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"workspace container "},[n("router-view")],1)},Ot=[],jt={name:"Workspace",components:{}},Dt=jt,$t=(n("2447"),Object(P["a"])(Dt,Pt,Ot,!1,null,null,null));$t.options.__file="Workspace.vue";var Et=$t.exports,Tt=n("8c4f"),Bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container "},[n("Search")],1)},Nt=[],zt={name:"HomePage",components:{Search:ht}},qt=zt,Vt=(n("a3bb"),Object(P["a"])(qt,Bt,Nt,!1,null,null,null));Vt.options.__file="HomePage.vue";var Ft=Vt.exports,Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrap container-fluid"},[null!=t.CurrentDocument?n("div",[n("h5",[t._v(t._s(t.CurrentDocument.title))]),n("div",{staticClass:"text-block"},[t._v("\n            "+t._s(t.ProcessedText)+"\n        ")])]):n("div",[n("p",[t._v("Документ загружается...")])])])},It=[],Jt={name:"DocumentView",components:{LinksBoxView:ot},data:function(){return{Step:5,LinksPackTo:null,LinksPackFrom:null,CurrentDocument:null,tmp:"none"}},computed:{ProcessedText:function(){return this.CurrentDocument.text}},created:function(){var t=H.DeStashDocId(this.$route.params.doc_id),e=this;y.RequestDocument(t,x.Document,function(t){e.CurrentDocument=t,e.tmp=t})}},At=Jt,Mt=(n("107f"),Object(P["a"])(At,Ht,It,!1,null,"63cfdc73",null));Mt.options.__file="DocumentView.vue";var Wt=Mt.exports,Xt=[{path:"/",component:Ft},{name:"document",path:"/document/:doc_id/:hash",component:Wt}],Kt=new Tt["a"]({routes:Xt}),Gt={Router:Kt},Qt={name:"app",router:Gt.Router,components:{Footer:gt,Navbar:wt,Search:ht,Workspace:Et}},Ut=Qt,Yt=(n("034f"),Object(P["a"])(Ut,r,a,!1,null,null,null));Yt.options.__file="App.vue";var Zt=Yt.exports;i["a"].config.productionTip=!1,i["a"].use(Tt["a"]),new i["a"]({render:function(t){return t(Zt)}}).$mount("#app")},"59be":function(t,e,n){"use strict";var i=n("b65b"),r=n.n(i);r.a},"59fb":function(t,e,n){},"615d":function(t,e,n){},"62e5":function(t,e,n){},"68b7":function(t,e,n){},"6f3c":function(t,e,n){},"71a1":function(t,e,n){"use strict";var i=n("e72d"),r=n.n(i);r.a},"7b0a":function(t,e,n){"use strict";var i=n("46d8"),r=n.n(i);r.a},"7b41":function(t,e,n){},"7c23":function(t,e,n){"use strict";var i=n("6f3c"),r=n.n(i);r.a},"8bc4":function(t,e,n){},a3bb:function(t,e,n){"use strict";var i=n("bfc3"),r=n.n(i);r.a},b485:function(t,e,n){"use strict";var i=n("615d"),r=n.n(i);r.a},b65b:function(t,e,n){},bfc3:function(t,e,n){},c21b:function(t,e,n){},e72d:function(t,e,n){},f4ce:function(t,e,n){"use strict";var i=n("7b41"),r=n.n(i);r.a}});
//# sourceMappingURL=app.0b033b9d.js.map