(function(t){function e(e){for(var s,r,o=e[0],c=e[1],u=e[2],d=0,f=[];d<o.length;d++)r=o[d],i[r]&&f.push(i[r][0]),i[r]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);l&&l(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],s=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(s=!1)}s&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var s={},i={app:0},a=[];function r(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=s,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/static/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var s=n("c21b"),i=n.n(s);i.a},"0c78":function(t,e,n){"use strict";var s=n("8bc4"),i=n.n(s);i.a},"0e25":function(t,e,n){"use strict";var s=n("f49e"),i=n.n(s);i.a},2162:function(t,e,n){"use strict";var s=n("fc17"),i=n.n(s);i.a},2447:function(t,e,n){"use strict";var s=n("59fb"),i=n.n(s);i.a},"2d40":function(t,e,n){"use strict";var s=n("c24d"),i=n.n(s);i.a},3382:function(t,e,n){"use strict";var s=n("67f6"),i=n.n(s);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var s=n("5ee5"),i=n.n(s),a=n("8c4f"),r=n("9f7b"),o=(n("f9e3"),n("2dd8"),n("bc3a")),c=n.n(o),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Navbar"),n("Workspace"),n("Footer")],1)},l=[],d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container "},[n("b-container",[n("p",[t._v(t._s(t.description))])])],1)},f=[],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"link-search-main"},[n("SearchBlock",{staticClass:"search-block",attrs:{Request:t.SearchRequest,isNeedSearch:t.isNeedSearch},on:{SearchResultsReceived:function(e){t.SetSearchResult(e)}}}),null!=t.SearchResult?n("SearchResultsBlock",{attrs:{SearchResults:t.SearchResult}}):t._e()],1)},h=[],m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",[n("b-row",[n("div",{staticClass:"col-12"},[n("div",{attrs:{id:"custom-search-input"}},[t.isLoading?n("p",[t._v(" Ведется поиск...")]):t._e(),n("div",{staticClass:"input-group"},[n("input",{staticClass:"search-query form-control",attrs:{type:"text",id:"input-search",placeholder:"Поиск"},domProps:{value:t.SearchRequest},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.SearchButtonClick()}}}),n("span",{staticClass:"input-group-btn"},[n("button",{attrs:{type:"button"}},[n("span",{staticClass:"fa fa-search",on:{click:function(e){t.SearchButtonClick()}}})])])])])])])],1)},v=[];n("ac6a"),n("28a5");function _(t){return t.map(function(t){return t.trim()}).filter(function(t){if(""!==t)return t})}function g(t){return t.filter(function(t,e,n){return n.indexOf(t)===e})}var S={trimFromSpaces:_,distinctArr:g},k={ElemsDelimiter:",",CitationPartsDelimiter:"->"},b={any_front:"*",any_back:-1};function C(t){var e=t.split(k.CitationPartsDelimiter);if(e=S.trimFromSpaces(e),e.length<2)return null;var n=e[0].split(k.ElemsDelimiter);n=S.trimFromSpaces(n),n=S.distinctArr(n);var s=e[1].split(k.ElemsDelimiter),i=[];if(s=S.trimFromSpaces(s),s=S.distinctArr(s),-1!==n.indexOf(b.any_front))if(-1!==s.indexOf(b.any_front))i.push({doc_id_from:b.any_back,doc_id_to:b.any_back});else for(var a=0;a<s.length;a++)i.push({doc_id_from:b.any_back,doc_id_to:s[a]});else if(-1!==s.indexOf(b.any_front))for(a=0;a<n.length;a++)i.push({doc_id_from:n[a],doc_id_to:b.any_back});else for(a=0;a<n.length;a++)for(var r=0;r<s.length;r++)i.push({doc_id_from:n[a],doc_id_to:s[r]});return i}var L={CitationFastSearch:C},R={sampleKeyword:"sampleKeyword"};function w(){throw"Not implemented!"}function y(t){var e=R.values;for(var n in e)if(-1!==t.indexOf(n))return w(t);if(t.indexOf(k.CitationPartsDelimiter))return L.CitationFastSearch(t);throw"Not implemented!"}var x=y;function P(t,e,n,s){var i=0,a=0,r=0,o=0,c=[],u=function(t,n){var s={doc_id_from:n.doc_id_from,doc_id_to:n.doc_id_to,range:t},i=JSON.stringify(s),a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("content-type","application/json"),a.send(i),a.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){for(var t=a.responseText,e=JSON.parse(t),n=[],s=0;s<e.length;s++)n.push(e[s]);c=c.concat(n),o++}else alert("ошибка: "+(this.status?this.statusText:"запрос не удался"))}};while(a<n.length&&i<t[0]){if(!(i+n[a].Size<=t[0])){var l=t[0]-i;if(i+n[a].Size<=t[1]){var d=[l,n[a].Size];i+=n[a].Size}else{var f=t[1]-i;d=[l,f],i+=t[1]-t[0]}r++;var p=a;setTimeout(function(){u(d,n[p])},0),a++;break}i+=n[a].Size,a++}while(a<n.length&&i<t[1])i+n[a].Size<=t[1]?(d=[0,n[a].Size],i+=n[a].Size):(d=[0,t[1]-i],i=t[1]),p=a,setTimeout(function(){u(d,n[p])},0),r++,a++;var h=function t(){r<=o?s(c):setTimeout(t,500)};setTimeout(h,0)}function N(t,e,n){var s=x(t);if(null!=s){for(var i=[],a=0,r=0;r<s.length;r++){var o=s[r],c=JSON.stringify(o),u=new XMLHttpRequest;u.open("POST",e,!0),u.setRequestHeader("content-type","application/json"),u.send(c),u.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var t=this.responseText+"",e=JSON.parse(t);i.push({Size:e.size,doc_id_from:o.doc_id_from,doc_id_to:o.doc_id_to}),a+=1}else a+=1}}var l=function t(){a===s.length?n(i):setTimeout(t,500)};setTimeout(l,500)}else n(null)}function O(t,e,n){var s=new XMLHttpRequest;s.open("POST",e,!0),s.setRequestHeader("content-type","application/json");var i=JSON.stringify({doc_id:t});s.send(i),s.onreadystatechange=function(){if(4==this.readyState)if(200==this.status){var t=this.responseText+"",e=JSON.parse(t);n(e)}else n(null,this.status)}}var q={RequestLinks:P,RequestSearch:N,RequestDocument:O},E="/api",T={Search:"".concat(E,"/search/number_of_links"),Document:"".concat(E,"/search/document"),Links:"".concat(E,"/search/get"),Auth_signin:"".concat(E,"/login"),Auth_signup:"".concat(E,"/register"),Auth_signout:"".concat(E,"/logout")},j="user",$={Search:"/search",SignUp:"/".concat(j,"/signup")},I={doc_id_delimiter:["/","-_-"]};function D(t){var e,n,s=0;if(0===t.length)return s;for(e=0;e<t.length;e++)n=t.charCodeAt(e),s=(s<<5)-s+n,s|=0;return s}function A(t){return D("".concat(t.doc_id_from).concat(t.doc_id_to))}function U(t){return t.split(I.doc_id_delimiter[0]).join(I.doc_id_delimiter[1])}function z(t){return t.split(I.doc_id_delimiter[1]).join(I.doc_id_delimiter[0])}function B(t){return t=t.split(I.doc_id_delimiter[0]).join(I.doc_id_delimiter[1]),t}function F(t){return t=t.split(I.doc_id_delimiter[1]).join(I.doc_id_delimiter[0]),t}var H={Hash:D,StashDocId:U,DeStashDocId:z,HashLink:A,StashRequest:B,DeStashRequest:F},M={name:"SearchBlock",props:{Request:String,isNeedSearch:Boolean},data:function(){return{url:T.Search,SearchRequest:"",isLoading:!1,tmp:"none"}},methods:{SearchButtonClick:function(){var t=document.getElementById("input-search").value;t=H.StashRequest(t),this.$router.push("".concat($.Search,"/").concat(t))},Update:function(){if(null!=this.Request&&this.isNeedSearch){this.SearchRequest=H.DeStashRequest(this.Request);var t=this;this.isLoading=!0,q.RequestSearch(this.SearchRequest,this.url,function(e){t.$emit("SearchResultsReceived",e),t.isLoading=!1})}}},watch:{Request:function(){this.Update()}},created:function(){this.Update()}},V=M,J=(n("2162"),n("2877")),K=Object(J["a"])(V,m,v,!1,null,"0e35791a",null);K.options.__file="SearchBlock.vue";var W=K.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",[t.LinksCount>0?n("div",{staticClass:"search-result-block"},[n("span",{staticClass:"page-list"},[n("PageList",{attrs:{Count:t.LinksCount,Step:t.Step,Current:t.CurrentRange},on:{PageChanged:function(e){t.getLinks(e)}}})],1),n("SearchStatistics",{attrs:{SearchResults:t.SearchResults,Count:t.LinksCount}}),t.isLoaded?n("div",{staticClass:"links-block"},[n("LinkBoxView",{attrs:{Links:t.Links,DefaultCollapse:!1}}),n("span",{staticClass:"page-list"},[n("PageList",{attrs:{Count:t.LinksCount,Step:t.Step,Current:t.CurrentRange},on:{PageChanged:function(e){t.getLinks(e)}}})],1)],1):n("p",[t._v("Загружается...")])],1):n("div",{staticClass:"container"},[t._v("\n            Поиск не дал результатов. \n    ")])])},X=[],Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("LinkView",{attrs:{CleanLink:t.CleanLink}})},Y=[],Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"link-container container card"},[n("b-card-header",{staticClass:"link-header"},[n("span",[n("p",[t._v("Цитирующий документ: "),n("router-link",{staticClass:"link",attrs:{to:"/document/"+t.utils.StashDocId(t.CleanLink.doc_id_from)+"/0"}},[t._v(t._s(t.CleanLink.doc_id_from))])],1)]),n("span",[n("p",[t._v("Цитируемый документ: "),n("router-link",{staticClass:"link",attrs:{to:"/document/"+t.utils.StashDocId(t.CleanLink.doc_id_to)+"/0"}},[t._v(t._s(t.CleanLink.doc_id_to))])],1)])]),n("b-card-body",[n("p",[n("b",[t._v("Заголовок цитируемого документа:")]),t._v(" "+t._s(t.CleanLink.to_doc_title)+"\n                ")]),n("span",[n("p",[t._v("Количество упоминаний: "+t._s(t.CleanLink.citations_number)+" ")])]),n("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.TitleId,expression:"TitleId"},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"context-toggler",attrs:{title:"Нажмите, чтобы просмотреть контекст цитаты"}},[t._v("\n                    Контекст цитирования\n                ")]),n("b-collapse",{attrs:{id:t.TitleId}},t._l(t.CitationsRange,function(e){return n("b-card-group",{key:e},[n("b-card",[n("b-card-header"),n("b-card-body",[n("p",[t._v(t._s(t.CleanLink.contexts[e].before)+" "),n("b",[t._v(t._s(t.CleanLink.contexts[e].citation))]),t._v(" "+t._s(t.CleanLink.contexts[e].after)+" ")])]),n("b-card-footer",[n("router-link",{attrs:{to:"/document/"+t.utils.StashDocId(t.CleanLink.doc_id_from)+"/"+t.utils.HashLink(t.CleanLink)}},[t._v("\n                            Перейти к цитате в тексте\n                        ")])],1)],1)],1)}))],1)],1)},tt=[],et={name:"LinkView",props:{CleanLink:Object,DefaultCollapse:Boolean},data:function(){return{utils:H}},computed:{CitationsRange:function(){for(var t=[],e=0;e<this.CleanLink.citations_number;e++)t.push(e);return t},TitleId:function(){return"#collapse_"+this.CleanLink.doc_id_from+"-"+this.CleanLink.doc_id_to}},methods:{GetPositionLink:function(t,e){return"#"+t+"__"+e}}},nt=et,st=(n("0c78"),Object(J["a"])(nt,Z,tt,!1,null,null,null));st.options.__file="LinkView.vue";var it=st.exports,at={name:"SearchResult",components:{LinkView:it},props:{CleanLink:Object},computed:{},methods:{}},rt=at,ot=(n("7c23"),Object(J["a"])(rt,Q,Y,!1,null,"d66bb60e",null));ot.options.__file="SearchResult.vue";var ct=ot.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",[n("b-card-header",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"search-request-statistics",expression:"'search-request-statistics'"}],staticClass:"bg-info text-white"},[t._v("\n            Статистический анализ запроса\n        ")]),n("b-collapse",{attrs:{id:"search-request-statistics"}},[n("b-card-body",[n("p",[t._v("Найдено: "+t._s(t.LinksCount))])])],1)],1)},lt=[],dt=(n("c5f6"),{name:"SearchStatistics",data:function(){return{tmp:"none"}},props:{SearchResults:Array,Count:Number},computed:{LinksCount:function(){return void 0==this.Count&&this.ComputeCount(),this.Count}},methods:{ComputeCount:function(){for(var t=0,e=0;e<this.SearchResults.length;e++)t+=this.SearchResults[e].Size;this.Count=t}}}),ft=dt,pt=(n("b0be"),Object(J["a"])(ft,ut,lt,!1,null,"40ec3108",null));pt.options.__file="SearchStatistics.vue";var ht=pt.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-list"},[n("span",[n("a",{staticClass:"page-link",on:{click:function(e){t.$emit("PageChanged",t.FirstPages)}}},[t._v("\n         <<<\n    ")]),t._l(t.PrevioslyPages,function(e){return n("a",{key:e[0],staticClass:"page-link",on:{click:function(n){t.$emit("PageChanged",e)}}},[t._v("\n        "+t._s(e[0])+" - "+t._s(e[1])+"\n    ")])}),n("p",{staticClass:"page-link current-link"},[t._v("\n        |"+t._s(t.Current[0])+" - "+t._s(t.Current[1])+"|\n    ")]),t._l(t.NextPages,function(e){return n("a",{key:e[0],staticClass:"page-link",on:{click:function(n){t.$emit("PageChanged",e)}}},[t._v("\n        "+t._s(e[0])+" - "+t._s(e[1])+"\n    ")])}),n("a",{staticClass:"page-link",on:{click:function(e){t.$emit("PageChanged",t.LastPages)}}},[t._v("\n        >>>\n    ")])],2)])},vt=[],_t={name:"PageList",data:function(){return{tmp:"none"}},props:{Count:Number,Step:Number,Current:Array},computed:{PrevioslyPages:function(){var t=[],e=this.Current;if(e[0]>2){var n=e[0]-this.Step-1;n<1&&(n=1),t.push([n,e[0]-1])}return t},NextPages:function(){for(var t=[],e=this.Current,n=0;n<2;n++){var s=e;if(e=[s[1]+1,s[1]+this.Step],e[0]>this.Count)break;e[1]>this.Count&&(e[1],this.Count),t.push(e)}return t},FirstPages:function(){var t=[1,this.Step];return t[1]>this.Count&&(t[1]=this.Count),t},LastPages:function(){var t=[this.Count-this.Step+1,this.Count];return t[0]<1&&(t[0]=1),t}}},gt=_t,St=(n("59be"),Object(J["a"])(gt,mt,vt,!1,null,"cd6f3780",null));St.options.__file="PageList.vue";var kt=St.exports,bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"links-block"},t._l(t.Links,function(e){return n("div",{key:e.doc_id_from+e.doc_id_to},[n("LinkView",{attrs:{CleanLink:e,CollapseDefault:t.CollapseDefault}})],1)}))},Ct=[],Lt={name:"LinksBoxView",components:{LinkView:it},props:{Links:Array,CollapseDefault:Boolean}},Rt=Lt,wt=(n("0e25"),Object(J["a"])(Rt,bt,Ct,!1,null,"569d50b9",null));wt.options.__file="LinksBoxView.vue";var yt=wt.exports,xt="NEW_LINKS_PACK",Pt="NEW_SEARCH_RESULT",Nt={NEW_LINKS_PACK:xt,NEW_SEARCH_RESULT:Pt},Ot={name:"SearchResultBlock",props:{SearchResults:Array},data:function(){return{Step:10,CurrentRange:[1,20],url:T.Links,tmp:null,Links:[],isLoaded:!1}},computed:{LinksCount:function(){for(var t=0,e=0;e<this.SearchResults.length;e++)t+=this.SearchResults[e].Size;return t}},components:{SearchResult:ct,PageList:kt,LinkBoxView:yt,SearchStatistics:ht},methods:{getLinks:function(t){this.CurrentRange=t;var e=JSON.stringify(this.SearchResults)+JSON.stringify(t),n=this.$store.getters.getStoredLinks(e);if(null!=n)return this.isLoaded=!0,void(this.Links=n);this.isLoaded=!1;var s=this;q.RequestLinks(t,this.url,this.SearchResults,function(t){s.isLoaded=!0,s.Links=t,s.$store.commit(Nt.NEW_LINKS_PACK,{request:e,result:t})})},Initialize:function(){this.CurrentRange=[1,this.Step],this.LinksCount<this.Step&&(this.CurrentRange[1]=this.LinksCount),this.getLinks(this.CurrentRange)}},watch:{SearchResults:function(){this.Initialize()}},created:function(){this.Initialize()}},qt=Ot,Et=(n("7eb2"),Object(J["a"])(qt,G,X,!1,null,"691c47d8",null));Et.options.__file="SearchResultsBlock.vue";var Tt=Et.exports,jt={name:"Search",data:function(){return{SearchResult:null,tmp:"none",SearchRequest:null,isNeedSearch:!0}},computed:{StoredResult:function(){return this.$store.getters.storedResults}},methods:{SetSearchRequest:function(t){t=t.trim(),void 0!=t||null!=t?(null==this.$store.getters.getStoredRes(t)?this.isNeedSearch=!0:(this.isNeedSearch=!1,this.SearchResult=this.$store.getters.getStoredRes(t)),this.SearchRequest=t):this.SearchRequest=""},SetSearchResult:function(t){this.tmp=":)",this.$store.commit(Nt.NEW_SEARCH_RESULT,{request:this.SearchRequest,result:t}),this.SearchResult=t}},created:function(){this.SetSearchRequest(this.$route.params.request)},beforeRouteUpdate:function(t,e,n){this.SetSearchRequest(t.params.request),n()},components:{SearchBlock:W,SearchResultsBlock:Tt}},$t=jt,It=(n("d255"),Object(J["a"])($t,p,h,!1,null,"06107e6d",null));It.options.__file="Search.vue";var Dt=It.exports,At="Tempor ut laborum ex excepteur laborum duis. Incididunt et nisi aliquip deserunt ea Lorem sit officia et consequat dolor ad adipisicing. Sint elit dolore esse consectetur dolore ut ullamco deserunt eiusmod sint. Non ut amet nisi non proident ex consequat commodo irure tempor in sit. Nostrud consectetur do labore eu amet exercitation velit aliqua nulla anim ipsum excepteur. Lorem amet magna adipisicing fugiat quis anim sit ipsum voluptate qui veniam velit in ex. Laboris pariatur commodo eiusmod velit cillum sint veniam amet.",Ut={name:"HomePage",data:function(){return{description:At}},components:{Search:Dt},computed:{token:function(){return this.$store.token}}},zt=Ut,Bt=(n("a3bb"),Object(J["a"])(zt,d,f,!1,null,null,null));Bt.options.__file="HomePage.vue";var Ft=Bt.exports,Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"wrap",attrs:{fluid:""}},[null!=t.CurrentDocument?n("div",[n("h5",{staticClass:"title-block"},[n("b",[t._v("Заголовок документа:")]),n("p",[t._v(t._s(t.CurrentDocument.title))])]),n("h4",{staticClass:"id-block"},[n("p",[n("b",[t._v("Номер документа:")]),t._v(" "+t._s(t.CurrentDocument.doc_id))])]),n("h4",{staticClass:"date-block"},[n("p",[n("b",[t._v("Дата публикации:")]),t._v(" "+t._s(t.CurrentDocument.release_date)+" ")])]),n("b-card",[null!=t.LinksTo?n("b-container",[n("b-card-header",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"link_to_block",expression:"'link_to_block'"}]},[t._v("Цитирование этого документа")]),n("b-collapse",{attrs:{id:"link_to_block"}},[n("b-card-body",[n("multipage-links-view",{attrs:{SearchResults:t.LinksTo,Step:5,DefaultCollapse:!0}})],1)],1)],1):n("p",[t._v(" Выполняется предобработка...")])],1),n("div",{staticClass:"text-block"},[null!==t.ProcessedText?n("div",[n("v-runtime-template",{attrs:{template:t.ProcessedText}})],1):n("p",[t._v("\n                Выполняется предобработка...\n            ")])])],1):n("div",[n("p",[t._v("Документ загружается...")])])])},Mt=[],Vt=(n("55dd"),n("dd1e")),Jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",[t.LinksCount>0?n("div",{staticClass:"search-result-block"},[n("span",{staticClass:"page-list"},[n("PageList",{attrs:{Count:t.LinksCount,Step:t.Step,Current:t.CurrentRange},on:{PageChanged:function(e){t.getLinks(e)}}})],1),t.isLoaded?n("div",{staticClass:"links-block"},[n("b-card-group",[n("LinkBoxView",{attrs:{Links:t.Links,CollapseDefault:t.CollapseDefault}})],1),n("span",{staticClass:"page-list"},[n("PageList",{attrs:{Count:t.LinksCount,Step:t.Step,Current:t.CurrentRange},on:{PageChanged:function(e){t.getLinks(e)}}})],1)],1):n("p",[t._v("Загружается...")])]):n("b-container",[t._v("\n            Не обнаружено.\n    ")])],1)},Kt=[],Wt={name:"MultipageLinksView",props:{SearchResults:Array,Step:Number,CollapseDefault:Boolean},data:function(){return{CurrentRange:[1,this.Step],tmp:null,Links:[],isLoaded:!1}},computed:{LinksCount:function(){for(var t=0,e=0;e<this.SearchResults.length;e++)t+=this.SearchResults[e].Size;return t},StoredLinks:function(){return this.$store.StoredLinks}},components:{PageList:kt,LinkBoxView:yt},methods:{getLinks:function(t){this.CurrentRange=t;var e=JSON.stringify(this.SearchResults)+JSON.stringify(t),n=this.$store.getters.getStoredLinks(e);if(null!=n)return this.isLoaded=!0,void(this.Links=n);this.isLoaded=!1;var s=this;q.RequestLinks(t,T.Links,this.SearchResults,function(t){s.isLoaded=!0,s.Links=t,s.$store.commit(Nt.NEW_LINKS_PACK,{request:e,result:t})})},Initialize:function(){this.CurrentRange=[1,this.Step],this.LinksCount<this.Step&&(this.CurrentRange[1]=this.LinksCount),this.getLinks(this.CurrentRange)}},watch:{SearchResults:function(){this.Initialize()}},created:function(){this.Initialize()}},Gt=Wt,Xt=(n("2d40"),Object(J["a"])(Gt,Jt,Kt,!1,null,"3456b568",null));Xt.options.__file="MultipageLinksView.vue";var Qt=Xt.exports,Yt={name:"DocumentView",components:{multipageLinksView:Qt,VRuntimeTemplate:Vt["a"]},data:function(){return{Step:5,LinksTo:null,LinksPackFrom:null,CurrentDocument:null,tmp:"none"}},computed:{SortedAloneLinks:function(){if(null===this.LinksPackFrom||null===this.LinksTo)return null;for(var t=[],e=0;e<this.LinksPackFrom.length;e++){for(var n=this.LinksPackFrom[e],s=0;s<n.positions_list.length;s++)var i={doc_id_from:n.doc_id_from,doc_id_to:n.doc_id_to,to_doc_title:n.to_doc_title,position:n.positions_list[s]};t.push(i)}return t.sort(function(t,e){return t.position.link_start-e.position.link_end}),t},ProcessedText:function(){if(null===this.CurrentDocument||null===this.SortedAloneLinks)return null;for(var t=this.CurrentDocument.text,e="<div><template>",n=0,s=0;s<this.SortedAloneLinks.length;s++){var i=this.SortedAloneLinks[s];e+=t.slice(n,i.position.link_start);var a=t.slice(i.position.link_start,i.position.link_end+1);e+='<b-btn size="sm" variant="link"  @click="OpenLink(\'/document/'.concat(H.StashDocId(i.doc_id_to),"/0')\">").concat(a,"</b-btn>"),n=i.position.link_end}return e+=t.slice(n,t.length),e+="</template></div>",e}},methods:{OpenLink:function(t){this.$router.push(t),this.tmp=t},Init:function(t){this.LinksTo=null,this.LinksPackFrom=null,this.CurrentDocument=null;var e=H.DeStashDocId(t.params.doc_id),n=this;q.RequestDocument(e,T.Document,function(t,e){null===t&&alert("Error while getting document. Error code: "+e),n.CurrentDocument=t}),q.RequestSearch("*->".concat(e),T.Search,function(t){n.LinksTo=t}),q.RequestSearch("".concat(e,"->*"),T.Search,function(t){q.RequestLinks([1,t.Size],T.Links,t,function(t){n.LinksPackFrom=t})})}},created:function(){this.Init(this.$route)},beforeRouteUpdate:function(t,e,n){this.Init(t),n()}},Zt=Yt,te=(n("65ca"),Object(J["a"])(Zt,Ht,Mt,!1,null,"4540e000",null));te.options.__file="DocumentView.vue";var ee=te.exports,ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center",staticStyle:{padding:"50px 0"}},[n("div",{staticClass:"logo"},[t._v("Sign Up")]),n("div",{staticClass:"login-form-1"},[n("form",{staticClass:"text-left",on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[n("div",{staticClass:"login-form-main-message"}),n("div",{staticClass:"main-login-form"},[""!=t.errMessage?n("div",[n("p",{staticClass:"danger"},[t._v(t._s(t.errMessage))])]):t._e(),n("div",{staticClass:"login-group"},[n("div",{staticClass:"form-group"},[n("label",{staticClass:"sr-only",attrs:{for:"lg_email"}},[t._v("email")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text",placeholder:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"sr-only",attrs:{for:"lg_password"}},[t._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"sr-only",attrs:{for:"lg_email"}},[t._v("first name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"first name",required:""},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"sr-only",attrs:{for:"lg_email"}},[t._v("last name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"last name",required:""},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value)}}}),n("div",[n("b-btn",{staticClass:"register-btn",attrs:{type:"submit",size:"sm",variant:"outline-success"}},[t._v("Register")])],1)])])])])])])},se=[],ie="AUTH_REQUEST",ae="AUTH_SUCCESS",re="AUTH_ERROR",oe="AUTH_LOGOUT",ce="REGISTER_REQUEST",ue="REGISTER_SUCCESS",le="REGISTER_ERROR";function de(t){return""!=t.password&&t.email.indexOf("@")>-1&&""!=t.firstName&&""!=t.LastName}function fe(t){return 400==t.code&&"user already exist"==t.message}var pe={CheckRegModel:de,isUserExistError:fe},he={name:"SignInForm",data:function(){return{email:"Rexarrior@yandex.ru",password:"sTame_342",firstName:"Ksandr",lastName:"renderon",organization:"none",errMessage:""}},methods:{register:function(){var t=this,e={email:this.email,password:this.password,firstName:this.firstName,lastName:this.lastName,organization:this.organization};pe.CheckRegModel(e)&&this.$store.dispatch(ce,e).then(function(){t.$router.push("/")},function(e){pe.isUserExistError(e)&&(t.errMessage=e)})}}},me=he,ve=(n("651c"),Object(J["a"])(me,ne,se,!1,null,"0b5298ea",null));ve.options.__file="SignUpForm.vue";var _e=ve.exports,ge=[{path:"/",component:Ft},{name:"document",path:"/document/:doc_id/:hash",component:ee},{path:"/search/:request",component:Dt},{path:"/search/",redirect:"/search/ "},{path:$.SignUp,component:_e}],Se=new a["a"]({routes:ge}),ke={Router:Se},be=n("2f62"),Ce=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Le=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"page-footer font-small white"},[n("div",{staticClass:"footer-copyright text-center py-3"},[t._v("© 2018 Copyright:\n        "),n("a",{attrs:{href:"https://github.com/orgs/robot-lab/teams/team-judicial-analysis/members"}},[t._v(" Judyst team")])])])}],Re={name:"Navbar"},we=Re,ye=(n("3382"),Object(J["a"])(we,Ce,Le,!1,null,"401daa4c",null));ye.options.__file="Footer.vue";var xe=ye.exports,Pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"navbar fixed-top navbar-dark bg-dark  navbar-main"},[n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"navbar-header"},[n("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[t._v("Judyst")])],1),n("b-navbar-nav",[n("b-nav-item",{attrs:{to:"/search/"}},[t._v("Search")])],1)],1)])},Ne=[],Oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",[t.isAuthenticated?n("div",[n("b-btn",{attrs:{size:"sm",variant:"outline-success"}},[t._v("\n        Logout\n    ")])],1):n("div",[n("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.signInModal",modifiers:{signInModal:!0}}],attrs:{size:"sm",variant:"outline-success"}},[t._v("\n            Sign in\n        ")]),n("b-btn",{attrs:{size:"sm",variant:"outline-success",to:t.signUpUrl}},[t._v("\n            Sign up\n        ")])],1),n("b-modal",{attrs:{id:"signInModal","hide-footer":"","hide-title":""}},[n("SignInForm")],1)],1)},qe=[],Ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center",staticStyle:{padding:"50px 0"}},[n("div",{staticClass:"logo"},[t._v("Sign in")]),n("div",{staticClass:"login-form-1"},[n("form",{staticClass:"text-left",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[n("div",{staticClass:"login-form-main-message"}),n("div",{staticClass:"main-login-form"},[n("div",{staticClass:"login-group"},[n("div",{staticClass:"form-group"},[n("label",{staticClass:"sr-only",attrs:{for:"lg_email"}},[t._v("email")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text",placeholder:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"sr-only",attrs:{for:"lg_password"}},[t._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),t._m(0)]),n("div",{staticClass:"etc-login-form"},[n("p",[t._v("new user? "),n("router-link",{attrs:{to:t.signUpUrl}},[t._v("create new account")])],1)])])])])},Te=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"login-button",attrs:{type:"submit"}},[n("i",{staticClass:"fa fa-chevron-right"})])}],je={name:"SignInForm",data:function(){return{email:"",password:"",signUpUrl:$.SignUp}},methods:{login:function(){var t=this,e=this.email,n=this.password;this.$store.dispatch(ie,{email:e,password:n}).then(function(){t.$router.push("/")})}}},$e=je,Ie=(n("fc6b"),Object(J["a"])($e,Ee,Te,!1,null,null,null));Ie.options.__file="SignInForm.vue";var De=Ie.exports,Ae={name:"AuthBar",data:function(){return{signUpUrl:$.SignUp}},computed:{isAuthenticated:function(){return this.$store.isAuthenticated}},methods:{logout:function(){var t=this;this.$store.dispatch(oe).then(function(){t.$router.push("/login")})}},components:{SignInForm:De}},Ue=Ae,ze=Object(J["a"])(Ue,Oe,qe,!1,null,null,null);ze.options.__file="AuthBar.vue";var Be=ze.exports,Fe={name:"Navbar",components:{AuthBar:Be}},He=Fe,Me=(n("b5d6"),Object(J["a"])(He,Pe,Ne,!1,null,"00505775",null));Me.options.__file="Navbar.vue";var Ve=Me.exports,Je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"workspace"},[n("router-view")],1)},Ke=[],We={name:"Workspace",components:{}},Ge=We,Xe=(n("2447"),Object(J["a"])(Ge,Je,Ke,!1,null,null,null));Xe.options.__file="Workspace.vue";var Qe,Ye,Ze,tn=Xe.exports,en=n("a322"),nn={token:localStorage.getItem("user-token")||"",status:""},sn={isAuthenticated:function(t){return!!t.token},authStatus:function(t){return t.status}},an=(Qe={},Object(en["a"])(Qe,ie,function(t,e){var n=t.commit;t.dispatch;return new Promise(function(t,s){n(ie),c()({url:T.Auth_signin,data:e,method:"POST"}).then(function(e){var s=e.data.token;if(void 0===s)throw"Token is undefined";localStorage.setItem("user-token",s),c.a.defaults.headers.common["Authorization"]="Token "+s,n(ae,s),t(e)}).catch(function(t){n(re,t),localStorage.removeItem("user-token"),s(t)})})}),Object(en["a"])(Qe,oe,function(t){var e=t.commit;t.dispatch;return new Promise(function(t,n){e(oe),c()({url:T.Auth_signout,method:"GET"}),localStorage.removeItem("user-token"),delete c.a.defaults.headers.common["Authorization"],t()})}),Object(en["a"])(Qe,ce,function(t,e){var n=t.commit;t.dispatch;return new Promise(function(t,s){n(ce),c()({url:T.Auth_signup,data:e,method:"POST"}).then(function(e){var s=e.data.token;localStorage.setItem("user-token",s),c.a.defaults.headers.common["Authorization"]=s,n(ue,s),t(e)}).catch(function(t){n(le,t),localStorage.removeItem("user-token"),s(t)})})}),Qe),rn=(Ye={},Object(en["a"])(Ye,ie,function(t){t.status="loading"}),Object(en["a"])(Ye,ae,function(t,e){t.status="success",t.token=e}),Object(en["a"])(Ye,re,function(t){t.status="error"}),Object(en["a"])(Ye,ce,function(t){t.status="loading"}),Object(en["a"])(Ye,ue,function(t,e){t.status="success",t.token=e}),Object(en["a"])(Ye,le,function(t){t.status="error"}),Ye),on={state:nn,getters:sn,mutations:rn,actions:an},cn={storedSearch:{},storedLinksPack:{}},un={getStoredRes:function(t){return function(e){return e in t.storedSearch?t.storedSearch[e]:null}},storedResults:function(t){return t.storedSearch},getStoredLinks:function(t){return function(e){return e in t.storedLinksPack?t.storedLinksPack[e]:null}},storedLinks:function(t){return t.storedLinks}},ln=(Ze={},Object(en["a"])(Ze,Pt,function(t,e){t.storedSearch[e.request]=e.result}),Object(en["a"])(Ze,xt,function(t,e){t.storedLinksPack[e.request]=e.result}),Ze),dn={},fn={state:cn,getters:un,mutations:ln,actions:dn};i.a.use(be["a"]);var pn={name:"app",router:ke.Router,store:new be["a"].Store({modules:{auth_store:on,search_store:fn}}),components:{Footer:xe,Navbar:Ve,Search:Dt,Workspace:tn}},hn=pn,mn=(n("034f"),Object(J["a"])(hn,u,l,!1,null,null,null));mn.options.__file="App.vue";var vn=mn.exports;i.a.config.productionTip=!1,i.a.use(a["a"]),i.a.use(r["a"]),new i.a({render:function(t){return t(vn)}}).$mount("#app");var _n=localStorage.getItem("user-token");_n&&(c.a.defaults.headers.common["Authorization"]=_n)},"59be":function(t,e,n){"use strict";var s=n("b65b"),i=n.n(s);i.a},"59fb":function(t,e,n){},"5c07":function(t,e,n){},"62f3":function(t,e,n){},"651c":function(t,e,n){"use strict";var s=n("daeb"),i=n.n(s);i.a},"65ca":function(t,e,n){"use strict";var s=n("edfc"),i=n.n(s);i.a},"67f6":function(t,e,n){},"6f3c":function(t,e,n){},"7c23":function(t,e,n){"use strict";var s=n("6f3c"),i=n.n(s);i.a},"7eb2":function(t,e,n){"use strict";var s=n("c3b7"),i=n.n(s);i.a},"8a68":function(t,e,n){},"8bc4":function(t,e,n){},a3bb:function(t,e,n){"use strict";var s=n("bfc3"),i=n.n(s);i.a},b0be:function(t,e,n){"use strict";var s=n("62f3"),i=n.n(s);i.a},b5d6:function(t,e,n){"use strict";var s=n("5c07"),i=n.n(s);i.a},b65b:function(t,e,n){},bbb2:function(t,e,n){},bfc3:function(t,e,n){},c21b:function(t,e,n){},c24d:function(t,e,n){},c3b7:function(t,e,n){},d255:function(t,e,n){"use strict";var s=n("bbb2"),i=n.n(s);i.a},daeb:function(t,e,n){},edfc:function(t,e,n){},f49e:function(t,e,n){},fc17:function(t,e,n){},fc6b:function(t,e,n){"use strict";var s=n("8a68"),i=n.n(s);i.a}});
//# sourceMappingURL=app.a01a2198.js.map